local lib = {}

local Script_Title = "Arceus X <font color="rgb(255, 0, 0)">|</font> TCMD UI"

-- Instances:
local Arceus = Instance.new("ScreenGui")
local Main = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local UIStroke = Instance.new("UIStroke")
local Intro = Instance.new("Frame")
local UICorner_2 = Instance.new("UICorner")
local Logo = Instance.new("ImageButton")
local UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local Title = Instance.new("TextLabel")
local Header = Instance.new("Frame")
local HeaderBackground = Instance.new("Frame")
local HeaderCorner = Instance.new("UICorner")
local Close = Instance.new("TextButton")
local CloseCorner = Instance.new("UICorner")
local Menu = Instance.new("ScrollingFrame")
local UIListLayout = Instance.new("UIListLayout")
local Toggle = Instance.new("Frame")
local ToggleCorner = Instance.new("UICorner")
local ToggleStroke = Instance.new("UIStroke")
local Enabled = Instance.new("Frame")
local EnabledCorner = Instance.new("UICorner")
local Check = Instance.new("Frame")
local CheckCorner = Instance.new("UICorner")
local Name = Instance.new("TextLabel")
local UIGradient = Instance.new("UIGradient")
local Button = Instance.new("Frame")
local ButtonCorner = Instance.new("UICorner")
local ButtonStroke = Instance.new("UIStroke")
local Name_2 = Instance.new("TextLabel")
local ButtonGradient = Instance.new("UIGradient")

-- Input Box
local InputBox = Instance.new("Frame")
local InputCorner = Instance.new("UICorner")
local InputStroke = Instance.new("UIStroke")
local Name_5 = Instance.new("TextLabel")
local InputGradient = Instance.new("UIGradient")
local TextBox = Instance.new("TextBox")
local TextCorner = Instance.new("UICorner")

-- Properties:
Arceus.Name = "ArceusX_TCMD"
Arceus.Enabled = true
Arceus.ResetOnSpawn = true
Arceus.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
Arceus.DisplayOrder = 999999999

Main.Name = "Main"
Main.Parent = Arceus
Main.Active = true
Main.Draggable = false
Main.AnchorPoint = Vector2.new(0.5, 0.5)
Main.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
Main.BorderSizePixel = 0
Main.Position = UDim2.new(0.35, 0, 0.3, 0)
Main.Size = UDim2.new(0.3, 0, 0.4, 0)
Main.ClipsDescendants = true

UICorner.CornerRadius = UDim.new(0, 8)
UICorner.Parent = Main

UIStroke.Color = Color3.fromRGB(80, 80, 90)
UIStroke.Thickness = 1
UIStroke.Transparency = 0.5
UIStroke.Parent = Main

Intro.Name = "Intro"
Intro.Parent = Main
Intro.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
Intro.ClipsDescendants = true
Intro.Size = UDim2.new(1, 0, 1, 0)
Intro.ZIndex = 2

UICorner_2.CornerRadius = UDim.new(0, 8)
UICorner_2.Parent = Intro

Logo.Parent = Intro
Logo.AnchorPoint = Vector2.new(0.5, 0.5)
Logo.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Logo.BackgroundTransparency = 1
Logo.BorderSizePixel = 0
Logo.Position = UDim2.new(0.5, 0, 0.5, 0)
Logo.Size = UDim2.new(0.75, 0, 0.75, 0)
Logo.ZIndex = 2
Logo.Image = "http://www.roblox.com/asset/?id=9178187770"
Logo.ScaleType = Enum.ScaleType.Fit
Logo.Active = false

UIAspectRatioConstraint.Parent = Logo

-- Header for dragging (TCMD Style)
Header.Name = "Header"
Header.Size = UDim2.new(1, 0, 0.12, 0)
Header.Position = UDim2.new(0, 0, 0, 0)
Header.BackgroundTransparency = 1
Header.ZIndex = 10
Header.Parent = Main

HeaderBackground.Size = UDim2.new(1, 0, 1, 0)
HeaderBackground.Position = UDim2.new(0, 0, 0, 0)
HeaderBackground.BackgroundColor3 = Color3.fromRGB(50, 50, 55)
HeaderBackground.BackgroundTransparency = 0.2
HeaderBackground.BorderSizePixel = 0
HeaderBackground.ZIndex = 1
HeaderBackground.Parent = Header

HeaderCorner.CornerRadius = UDim.new(0, 8)
HeaderCorner.Parent = HeaderBackground

Title.Name = "Title"
Title.Parent = Header
Title.AnchorPoint = Vector2.new(0, 0.5)
Title.BackgroundTransparency = 1
Title.Position = UDim2.new(0.05, 0, 0.5, 0)
Title.Size = UDim2.new(0.75, 0, 0.8, 0)
Title.Font = Enum.Font.GothamSemibold
Title.FontFace = Font.new("rbxasset://fonts/families/Gotham.json", Enum.FontWeight.Semibold)
Title.RichText = true
Title.Text = Script_Title
Title.TextColor3 = Color3.fromRGB(220, 220, 220)
Title.TextScaled = true
Title.TextSize = 14
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.TextYAlignment = Enum.TextYAlignment.Center
Title.ZIndex = 2

Close.Name = "Close"
Close.Size = UDim2.new(0.1, 0, 0.7, 0)
Close.Position = UDim2.new(0.88, 0, 0.15, 0)
Close.BackgroundColor3 = Color3.fromRGB(60, 60, 65)
Close.BackgroundTransparency = 0.7
Close.BorderSizePixel = 0
Close.Font = Enum.Font.GothamBold
Close.Text = "Ã—"
Close.TextColor3 = Color3.fromRGB(220, 220, 220)
Close.TextScaled = true
Close.TextSize = 24
Close.ZIndex = 2
Close.Parent = Header

CloseCorner.CornerRadius = UDim.new(0.5, 0)
CloseCorner.Parent = Close

Menu.Name = "Menu"
Menu.Parent = Main
Menu.BackgroundTransparency = 1
Menu.BorderSizePixel = 0
Menu.Position = UDim2.new(0.025, 0, 0.13, 0)
Menu.Size = UDim2.new(0.95, 0, 0.85, 0)
Menu.AutomaticCanvasSize = Enum.AutomaticSize.Y
Menu.CanvasSize = UDim2.new(0, 0, 0, 0)
Menu.ScrollBarThickness = 4
Menu.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 110)

UIListLayout.Parent = Menu
UIListLayout.Padding = UDim.new(0, 8)
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder

-- TCMD Style Toggle
Toggle.Name = "Toggle"
Toggle.BackgroundColor3 = Color3.fromRGB(35, 35, 40)
Toggle.BackgroundTransparency = 0.9
Toggle.Size = UDim2.new(1, -10, 0, 45)

ToggleCorner.CornerRadius = UDim.new(0, 6)
ToggleCorner.Parent = Toggle

ToggleStroke.Color = Color3.fromRGB(60, 60, 65)
ToggleStroke.Thickness = 1
ToggleStroke.Transparency = 0.7
ToggleStroke.Parent = Toggle

Enabled.Name = "Enabled"
Enabled.Parent = Toggle
Enabled.AnchorPoint = Vector2.new(1, 0.5)
Enabled.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
Enabled.Position = UDim2.new(0.95, 0, 0.5, 0)
Enabled.Size = UDim2.new(0.12, 0, 0.6, 0)
Enabled.Visible = false

EnabledCorner.CornerRadius = UDim.new(0.3, 0)
EnabledCorner.Parent = Enabled

Check.Name = "Check"
Check.Parent = Enabled
Check.AnchorPoint = Vector2.new(0.5, 0.5)
Check.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Check.Position = UDim2.new(0.5, 0, 0.5, 0)
Check.Size = UDim2.new(0.6, 0, 0.6, 0)

CheckCorner.CornerRadius = UDim.new(0.3, 0)
CheckCorner.Parent = Check

Name.Name = "Name"
Name.Parent = Toggle
Name.AnchorPoint = Vector2.new(0, 0.5)
Name.BackgroundTransparency = 1
Name.Position = UDim2.new(0.05, 0, 0.5, 0)
Name.Size = UDim2.new(0.8, 0, 1, 0)
Name.Font = Enum.Font.Gotham
Name.Text = "Script"
Name.TextColor3 = Color3.fromRGB(200, 200, 210)
Name.TextScaled = true
Name.TextSize = 14
Name.TextXAlignment = Enum.TextXAlignment.Left
Name.TextYAlignment = Enum.TextYAlignment.Center

UIGradient.Color = ColorSequence.new{ColorSequenceKeypoint.new(0.00, Color3.fromRGB(255, 255, 255)), ColorSequenceKeypoint.new(1.00, Color3.fromRGB(180, 180, 180))}
UIGradient.Rotation = 90
UIGradient.Parent = Toggle

-- TCMD Style Button
Button.Name = "Button"
Button.BackgroundColor3 = Color3.fromRGB(35, 35, 40)
Button.BackgroundTransparency = 0.9
Button.Size = UDim2.new(1, -10, 0, 45)

ButtonCorner.CornerRadius = UDim.new(0, 6)
ButtonCorner.Parent = Button

ButtonStroke.Color = Color3.fromRGB(60, 60, 65)
ButtonStroke.Thickness = 1
ButtonStroke.Transparency = 0.7
ButtonStroke.Parent = Button

Name_2.Name = "Name"
Name_2.Parent = Button
Name_2.AnchorPoint = Vector2.new(0, 0.5)
Name_2.BackgroundTransparency = 1
Name_2.Position = UDim2.new(0.05, 0, 0.5, 0)
Name_2.Size = UDim2.new(0.95, 0, 1, 0)
Name_2.Font = Enum.Font.Gotham
Name_2.Text = "Button"
Name_2.TextColor3 = Color3.fromRGB(200, 200, 210)
Name_2.TextScaled = true
Name_2.TextSize = 14
Name_2.TextXAlignment = Enum.TextXAlignment.Left
Name_2.TextYAlignment = Enum.TextYAlignment.Center

ButtonGradient.Color = ColorSequence.new{ColorSequenceKeypoint.new(0.00, Color3.fromRGB(255, 255, 255)), ColorSequenceKeypoint.new(1.00, Color3.fromRGB(180, 180, 180))}
ButtonGradient.Rotation = 90
ButtonGradient.Parent = Button

-- TCMD Style InputBox
InputBox.Name = "InputBox"
InputBox.BackgroundColor3 = Color3.fromRGB(35, 35, 40)
InputBox.BackgroundTransparency = 0.9
InputBox.Size = UDim2.new(1, -10, 0, 45)
InputBox.AutoButtonColor = false

InputCorner.CornerRadius = UDim.new(0, 6)
InputCorner.Parent = InputBox

InputStroke.Color = Color3.fromRGB(60, 60, 65)
InputStroke.Thickness = 1
InputStroke.Transparency = 0.7
InputStroke.Parent = InputBox

Name_5.Name = "Name"
Name_5.Parent = InputBox
Name_5.AnchorPoint = Vector2.new(0, 0.5)
Name_5.BackgroundTransparency = 1
Name_5.Position = UDim2.new(0.05, 0, 0.3, 0)
Name_5.Size = UDim2.new(0.6, 0, 0.4, 0)
Name_5.Font = Enum.Font.Gotham
Name_5.Text = "Input Box"
Name_5.TextColor3 = Color3.fromRGB(200, 200, 210)
Name_5.TextScaled = true
Name_5.TextSize = 12
Name_5.TextXAlignment = Enum.TextXAlignment.Left
Name_5.TextYAlignment = Enum.TextYAlignment.Center

InputGradient.Color = ColorSequence.new{ColorSequenceKeypoint.new(0.00, Color3.fromRGB(255, 255, 255)), ColorSequenceKeypoint.new(1.00, Color3.fromRGB(180, 180, 180))}
InputGradient.Rotation = 90
InputGradient.Parent = InputBox

TextBox.Parent = InputBox
TextBox.AnchorPoint = Vector2.new(0, 0.5)
TextBox.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
TextBox.BorderSizePixel = 0
TextBox.Position = UDim2.new(0.68, 0, 0.5, 0)
TextBox.Size = UDim2.new(0.3, 0, 0.7, 0)
TextBox.Font = Enum.Font.Gotham
TextBox.PlaceholderColor3 = Color3.fromRGB(140, 140, 150)
TextBox.PlaceholderText = "Enter text..."
TextBox.Text = ""
TextBox.TextColor3 = Color3.fromRGB(220, 220, 220)
TextBox.TextScaled = true
TextBox.TextXAlignment = Enum.TextXAlignment.Left

TextCorner.CornerRadius = UDim.new(0, 4)
TextCorner.Parent = TextBox

-- Dragging System (TCMD Style)
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local dragging = false
local dragInput, dragStart, startPos

local function updateInput(input)
    local delta = input.Position - dragStart
    local newPos = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    local viewportSize = workspace.CurrentCamera.ViewportSize
    local frameSize = Main.AbsoluteSize
    newPos = UDim2.new(newPos.X.Scale, math.clamp(newPos.X.Offset, 0, viewportSize.X - frameSize.X), newPos.Y.Scale, math.clamp(newPos.Y.Offset, 0, viewportSize.Y - frameSize.Y))
    Main.Position = newPos
end

Header.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = Main.Position
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        updateInput(input)
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = false
    end
end)

-- SCRIPT
local function uiparent()
    local success, parent = pcall(function() return gethui() end)
    if not success then return game:GetService("CoreGui") end
    return parent
end

pcall(function() Arceus.Parent = uiparent() end)
if not Arceus.Parent then Arceus.Parent = game:GetService("Players").LocalPlayer.PlayerGui end

local element_height = 45
local elements = 0

local function AddSpace(parent)
    local space = Instance.new("Frame")
    space.Size = UDim2.new(1, 0, 0, 8)
    space.BackgroundTransparency = 1
    space.LayoutOrder = elements
    space.Parent = parent
    elements += 1
end

function lib:AddToggle(name, funct, enabled, ...)
    local newTog = Toggle:Clone()
    local args = {...}
    
    newTog.MouseButton1Click:Connect(function()
        enabled = not enabled
        newTog.Enabled.Visible = enabled
        funct(enabled, unpack(args))
    end)
    
    newTog.Enabled.Visible = enabled
    newTog.Name.Text = name
    newTog.Size = UDim2.new(1, -10, 0, element_height)
    newTog.Name = name
    newTog.Parent = Menu
    newTog.LayoutOrder = elements
    newTog.Visible = true
    
    elements += 1
    AddSpace(Menu)
    
    -- Hover effects (TCMD Style)
    newTog.MouseEnter:Connect(function()
        TweenService:Create(newTog, TweenInfo.new(0.2), {
            BackgroundTransparency = 0.85,
            BackgroundColor3 = Color3.fromRGB(55, 55, 60)
        }):Play()
    end)
    
    newTog.MouseLeave:Connect(function()
        TweenService:Create(newTog, TweenInfo.new(0.2), {
            BackgroundTransparency = 0.9,
            BackgroundColor3 = Color3.fromRGB(35, 35, 40)
        }):Play()
    end)
    
    return newTog
end

function lib:AddButton(name, funct, ...)
    local newBut = Button:Clone()
    local args = {...}
    
    newBut.MouseButton1Click:Connect(function()
        funct(unpack(args))
    end)
    
    newBut.Name.Text = name
    newBut.Size = UDim2.new(1, -10, 0, element_height)
    newBut.Name = name
    newBut.Parent = Menu
    newBut.LayoutOrder = elements
    newBut.Visible = true
    
    elements += 1
    AddSpace(Menu)
    
    -- Hover effects
    newBut.MouseEnter:Connect(function()
        TweenService:Create(newBut, TweenInfo.new(0.2), {
            BackgroundTransparency = 0.85,
            BackgroundColor3 = Color3.fromRGB(55, 55, 60)
        }):Play()
    end)
    
    newBut.MouseLeave:Connect(function()
        TweenService:Create(newBut, TweenInfo.new(0.2), {
            BackgroundTransparency = 0.9,
            BackgroundColor3 = Color3.fromRGB(35, 35, 40)
        }):Play()
    end)
    
    return newBut
end

function lib:AddInputBox(name, funct, placeholder, default, ...)
    local newInput = InputBox:Clone()
    local args = {...}
    
    newInput.Name.Text = name
    if placeholder then newInput.TextBox.PlaceholderText = placeholder end
    if default then newInput.TextBox.Text = default end
    
    local textBox = newInput.TextBox
    local function submitText()
        local text = textBox.Text
        funct(text, unpack(args))
    end
    
    textBox.FocusLost:Connect(function(enterPressed)
        if enterPressed then submitText() end
    end)
    
    newInput.MouseButton1Click:Connect(function()
        if not textBox:IsFocused() then
            textBox:CaptureFocus()
        end
    end)
    
    newInput.Size = UDim2.new(1, -10, 0, element_height)
    newInput.Name = name
    newInput.Parent = Menu
    newInput.LayoutOrder = elements
    newInput.Visible = true
    
    elements += 1
    AddSpace(Menu)
    
    local inputObj = {
        Frame = newInput,
        TextBox = textBox,
        GetText = function() return textBox.Text end,
        SetText = function(newText) textBox.Text = newText or "" end,
        Clear = function() textBox.Text = "" end,
        SetPlaceholder = function(placeholderText) textBox.PlaceholderText = placeholderText or "Enter text..." end
    }
    
    return inputObj
end

function lib:SetTitle(txt)
    Title.Text = txt
end

function lib:SetIcon(img)
    Logo.Image = img
end

function lib:SetBackgroundColor(r, g, b)
    Main.BackgroundColor3 = Color3.fromRGB(r, g, b)
    Intro.BackgroundColor3 = Color3.fromRGB(r, g, b)
    HeaderBackground.BackgroundColor3 = Color3.fromRGB(math.max(0, r+10), math.max(0, g+10), math.max(0, b+10))
end

function lib:SetTitleColor(r, g, b)
    Title.TextColor3 = Color3.fromRGB(r, g, b)
end

function lib:SetCloseBtnColor(r, g, b)
    Close.TextColor3 = Color3.fromRGB(r, g, b)
    Enabled.BackgroundColor3 = Color3.fromRGB(r, g, b)
    Check.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
end

function lib:SetButtonsColor(r, g, b)
    Toggle.BackgroundColor3 = Color3.fromRGB(r, g, b)
    Button.BackgroundColor3 = Color3.fromRGB(r, g, b)
    InputBox.BackgroundColor3 = Color3.fromRGB(r, g, b)
    TextBox.BackgroundColor3 = Color3.fromRGB(math.max(0, r-10), math.max(0, g-10), math.max(0, b-10))
end

-- Close functionality (TCMD Style)
Close.MouseButton1Click:Connect(function()
    Logo.Active = true
    TweenService:Create(Intro, TweenInfo.new(0.25, Enum.EasingStyle.Quad), {BackgroundTransparency = 0}):Play()
    
    task.wait(0.3)
    Main:TweenSizeAndPosition(UDim2.new(0, 0, 0.4, 0), UDim2.new(0.5, 0, 0.3, 0), "In", "Quad", 0.3)
    
    task.wait(0.3)
    for _, obj in pairs(Main:GetChildren()) do
        if obj:IsA("GuiObject") and obj ~= Intro then
            obj.Visible = false
        end
    end
    
    TweenService:Create(Logo, TweenInfo.new(0.25, Enum.EasingStyle.Quad), {ImageTransparency = 0.8}):Play()
    TweenService:Create(Intro, TweenInfo.new(0.25, Enum.EasingStyle.Quad), {BackgroundTransparency = 1}):Play()
    TweenService:Create(Main, TweenInfo.new(0.25, Enum.EasingStyle.Quad), {BackgroundTransparency = 0.8}):Play()
end)

Logo.MouseButton1Click:Connect(function()
    Logo.Active = false
    TweenService:Create(Logo, TweenInfo.new(0.25, Enum.EasingStyle.Quad), {ImageTransparency = 0}):Play()
    TweenService:Create(Intro, TweenInfo.new(0.25, Enum.EasingStyle.Quad), {BackgroundTransparency = 0}):Play()
    TweenService:Create(Main, TweenInfo.new(0.25, Enum.EasingStyle.Quad), {BackgroundTransparency = 0}):Play()
    
    task.wait(0.3)
    Main:TweenSize(UDim2.new(0.3, 0, 0.4, 0), "Out", "Quad", 0.3)
    
    task.wait(0.3)
    Logo:TweenSizeAndPosition(UDim2.new(0.175, 0.175), UDim2.new(0.075, 0.15), "Out", "Quad", 0.25)
    
    for _, obj in pairs(Main:GetChildren()) do
        if obj:IsA("GuiObject") and obj ~= Intro then
            obj.Visible = true
        end
    end
    
    task.wait(0.3)
    TweenService:Create(Intro, TweenInfo.new(0.25, Enum.EasingStyle.Quad), {BackgroundTransparency = 1}):Play()
end)

-- INIT (TCMD Style Animation)
task.wait(0.1)
Main:TweenPosition(UDim2.new(0.35, 0, 0.3, 0), "Out", "Quad", 0.5)

task.wait(1.2)
Logo:TweenSizeAndPosition(UDim2.new(0.175, 0.175), UDim2.new(0.075, 0.15), "In", "Quad", 0.8)

task.wait(1.5)
TweenService:Create(Intro, TweenInfo.new(0.8, Enum.EasingStyle.Quad), {BackgroundTransparency = 1}):Play()

return lib
