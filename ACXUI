local lib = {}

local Script_Title = "Arceus X <font color=\"rgb(255, 0, 0)\">|</font> Ui Lib"

-- Instances:
local Arceus = Instance.new("ScreenGui")
local Main = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local MainShadow = Instance.new("ImageLabel") -- Added Main Shadow
local Intro = Instance.new("Frame")
local UICorner_2 = Instance.new("UICorner")
local Logo = Instance.new("ImageButton")
local UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local Title = Instance.new("TextLabel")
local TitleShadow = Instance.new("ImageLabel") -- Added Title Shadow
local Menu = Instance.new("ScrollingFrame")
local UIListLayout = Instance.new("UIListLayout")
local Toggle = Instance.new("ImageButton")
local UICorner_3 = Instance.new("UICorner")
local ToggleShadow = Instance.new("ImageLabel") -- Added Toggle Shadow
local Enabled = Instance.new("Frame")
local UIAspectRatioConstraint_2 = Instance.new("UIAspectRatioConstraint")
local UICorner_4 = Instance.new("UICorner")
local Check = Instance.new("Frame")
local UIAspectRatioConstraint_3 = Instance.new("UIAspectRatioConstraint")
local UICorner_5 = Instance.new("UICorner")
local Name = Instance.new("TextLabel")
local UIGradient = Instance.new("UIGradient")
local Button = Instance.new("ImageButton")
local UICorner_6 = Instance.new("UICorner")
local ButtonShadow = Instance.new("ImageLabel") -- Added Button Shadow
local Name_2 = Instance.new("TextLabel")
local UIGradient_2 = Instance.new("UIGradient")
local tab = Instance.new("Frame")
local Close = Instance.new("TextButton")
local CloseShadow = Instance.new("ImageLabel") -- Added Close Button Shadow
local ComboElem = Instance.new("ImageButton")
local UICorner_7 = Instance.new("UICorner")
local ComboElemShadow = Instance.new("ImageLabel") -- Added ComboElem Shadow
local Name_3 = Instance.new("TextLabel")
local UIGradient_3 = Instance.new("UIGradient")
local Img = Instance.new("TextLabel")
local UIAspectRatioConstraint_4 = Instance.new("UIAspectRatioConstraint")
local ComboBox = Instance.new("ImageButton")
local UICorner_8 = Instance.new("UICorner")
local ComboBoxShadow = Instance.new("ImageLabel") -- Added ComboBox Shadow
local Name_4 = Instance.new("TextLabel")
local UIGradient_4 = Instance.new("UIGradient")
local Img_2 = Instance.new("TextLabel")
local UIAspectRatioConstraint_5 = Instance.new("UIAspectRatioConstraint")

-- New Input Box Instances:
local InputBox = Instance.new("ImageButton")
local UICorner_9 = Instance.new("UICorner")
local InputBoxShadow = Instance.new("ImageLabel") -- Added InputBox Shadow
local Name_5 = Instance.new("TextLabel")
local UIGradient_5 = Instance.new("UIGradient")
local TextBox = Instance.new("TextBox")
local UICorner_10 = Instance.new("UICorner")
local TextBoxShadow = Instance.new("ImageLabel") -- Added TextBox Shadow

-- Properties:

Arceus.Name = "Arceus"
Arceus.Enabled = true
Arceus.ResetOnSpawn = true
Arceus.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
Arceus.DisplayOrder = 999999999

Main.Name = "Main"
Main.Parent = Arceus
Main.Active = true
Main.Draggable = true
Main.AnchorPoint = Vector2.new(0.5, 0.5)
Main.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Main.BackgroundTransparency = 0.15
Main.BorderSizePixel = 0
Main.Position = UDim2.new(0.5, 0, -0.2, 0)
Main.Size = UDim2.new(0.3, 0, 0.3, 0)
Main.ZIndex = 1

UICorner.CornerRadius = UDim.new(0.1, 0)
UICorner.Parent = Main

-- Main Shadow
MainShadow.Name = "MainShadow"
MainShadow.Parent = Main
MainShadow.AnchorPoint = Vector2.new(0.5, 0.5)
MainShadow.BackgroundTransparency = 1
MainBorderSizePixel = 0
MainShadow.Position = UDim2.new(0.5, 0, 0.5, 0)
MainShadow.Size = UDim2.new(1, 10, 1, 10) -- Slightly larger than main
MainShadow.ZIndex = 0
MainShadow.Image = "rbxassetid://5554236805" -- Soft shadow image
MainShadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
MainShadow.ImageTransparency = 0.8
MainShadow.ScaleType = Enum.ScaleType.Slice
MainShadow.SliceCenter = Rect.new(23, 23, 277, 277)

Intro.Name = "Intro"
Intro.Parent = Main
Intro.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Intro.BackgroundTransparency = 0
Intro.ClipsDescendants = true
Intro.Size = UDim2.new(1, 0, 1, 0)
Intro.ZIndex = 2

UICorner_2.CornerRadius = UDim.new(0.1, 0)
UICorner_2.Parent = Intro

Logo.Parent = Intro
Logo.AnchorPoint = Vector2.new(0.5, 0.5)
Logo.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Logo.BackgroundTransparency = 1
Logo.BorderSizePixel = 0
Logo.Position = UDim2.new(0.5, 0, 0.5, 0)
Logo.Size = UDim2.new(0.75, 0, 0.75, 0)
Logo.ZIndex = 2
Logo.Image = "http://www.roblox.com/asset/?id=9178187770"
Logo.ImageTransparency = 0
Logo.ScaleType = Enum.ScaleType.Fit
Logo.Active = false

UIAspectRatioConstraint.Parent = Logo

Title.Name = "Title"
Title.Parent = Main
Title.AnchorPoint = Vector2.new(1, 0)
Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.BorderSizePixel = 0
Title.Position = UDim2.new(0.975, 0, 0.075, 0)
Title.Size = UDim2.new(0.85, 0, 0.155, 0)
Title.ZIndex = 2
Title.Font = Enum.Font.TitilliumWeb
Title.FontFace = Font.new("rbxasset://fonts/families/TitilliumWeb.json", Enum.FontWeight.Bold)
Title.RichText = true
Title.Text = Script_Title
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextScaled = true
Title.TextSize = 14
Title.TextWrapped = true
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.TextYAlignment = Enum.TextYAlignment.Center

-- Title Shadow
TitleShadow.Name = "TitleShadow"
TitleShadow.Parent = Title
TitleShadow.AnchorPoint = Vector2.new(0.5, 0.5)
TitleShadow.BackgroundTransparency = 1
TitleShadow.BorderSizePixel = 0
TitleShadow.Position = UDim2.new(0.5, 0, 0.5, 0)
TitleShadow.Size = UDim2.new(1, 4, 1, 4)
TitleShadow.ZIndex = 1
TitleShadow.Image = "rbxassetid://5554236805"
TitleShadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
TitleShadow.ImageTransparency = 0.7
TitleShadow.ScaleType = Enum.ScaleType.Slice
TitleShadow.SliceCenter = Rect.new(23, 23, 277, 277)

Menu.Name = "Menu"
Menu.Parent = Main
Menu.Active = true
Menu.AnchorPoint = Vector2.new(0.5, 1)
Menu.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Menu.BackgroundTransparency = 1
Menu.AutomaticCanvasSize = Enum.AutomaticSize.Y
Menu.BorderSizePixel = 0
Menu.Position = UDim2.new(0.5, 0, 0.95, 0)
Menu.Size = UDim2.new(0.95, 0, 0.65, 0)
Menu.CanvasSize = UDim2.new(0, 0, 0, 0)
Menu.ScrollBarImageColor3 = Color3.fromRGB(255, 255, 255)
Menu.ScrollBarThickness = Menu.AbsoluteSize.X/25
Menu.ScrollBarImageTransparency = 0.5
Menu.ZIndex = 2

UIListLayout.Parent = Menu
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder

Toggle.Name = "Toggle"
Toggle.Visible = false
Toggle.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
Toggle.BackgroundTransparency = 0.1
Toggle.Size = UDim2.new(0.95, 0, 0, 50)
Toggle.ZIndex = 2

UICorner_3.CornerRadius = UDim.new(0.25, 0)
UICorner_3.Parent = Toggle

-- Toggle Shadow
ToggleShadow.Name = "ToggleShadow"
ToggleShadow.Parent = Toggle
ToggleShadow.AnchorPoint = Vector2.new(0.5, 0.5)
ToggleShadow.BackgroundTransparency = 1
ToggleShadow.BorderSizePixel = 0
ToggleShadow.Position = UDim2.new(0.5, 0, 0.5, 0)
ToggleShadow.Size = UDim2.new(1, 6, 1, 6)
ToggleShadow.ZIndex = 1
ToggleShadow.Image = "rbxassetid://5554236805"
ToggleShadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
ToggleShadow.ImageTransparency = 0.6
ToggleShadow.ScaleType = Enum.ScaleType.Slice
ToggleShadow.SliceCenter = Rect.new(23, 23, 277, 277)

Enabled.Name = "Enabled"
Enabled.Parent = Toggle
Enabled.AnchorPoint = Vector2.new(1, 0.5)
Enabled.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
Enabled.BackgroundTransparency = 0.1
Enabled.Position = UDim2.new(0.975, 0, 0.5, 0)
Enabled.Size = UDim2.new(0.75, 0, 0.75, 0)
Enabled.ZIndex = 3

UIAspectRatioConstraint_2.Parent = Enabled

UICorner_4.CornerRadius = UDim.new(0.3, 0)
UICorner_4.Parent = Enabled

Check.Name = "Check"
Check.Parent = Enabled
Check.AnchorPoint = Vector2.new(0.5, 0.5)
Check.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
Check.Position = UDim2.new(0.5, 0, 0.5, 0)
Check.Size = UDim2.new(0.65, 0, 0.65, 0)
Check.ZIndex = 4

UIAspectRatioConstraint_3.Parent = Check

UICorner_5.CornerRadius = UDim.new(0.3, 0)
UICorner_5.Parent = Check

Name.Name = "Name"
Name.Parent = Toggle
Name.AnchorPoint = Vector2.new(0, 0.5)
Name.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Name.BackgroundTransparency = 1
Name.BorderSizePixel = 0
Name.Position = UDim2.new(0.05, 0, 0.5, 0)
Name.Size = UDim2.new(0.75, 0, 0.8, 0)
Name.ZIndex = 3
Name.Font = Enum.Font.TitilliumWeb
Name.Text = "Script"
Name.TextColor3 = Color3.fromRGB(255, 255, 255)
Name.TextScaled = true
Name.TextSize = 14
Name.TextWrapped = true
Name.TextXAlignment = Enum.TextXAlignment.Left
Name.TextYAlignment = Enum.TextYAlignment.Bottom

UIGradient.Color = ColorSequence.new{ColorSequenceKeypoint.new(0.00, Color3.fromRGB(255, 255, 255)), ColorSequenceKeypoint.new(1.00, Color3.fromRGB(180, 180, 180))}
UIGradient.Transparency = NumberSequence.new(0.2)
UIGradient.Parent = Toggle

Button.Name = "Button"
Button.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
Button.BackgroundTransparency = 0.1
Button.Size = UDim2.new(0.95, 0, 0, 50)
Button.ZIndex = 2

UICorner_6.CornerRadius = UDim.new(0.25, 0)
UICorner_6.Parent = Button

-- Button Shadow
ButtonShadow.Name = "ButtonShadow"
ButtonShadow.Parent = Button
ButtonShadow.AnchorPoint = Vector2.new(0.5, 0.5)
ButtonShadow.BackgroundTransparency = 1
ButtonShadow.BorderSizePixel = 0
ButtonShadow.Position = UDim2.new(0.5, 0, 0.5, 0)
ButtonShadow.Size = UDim2.new(1, 6, 1, 6)
ButtonShadow.ZIndex = 1
ButtonShadow.Image = "rbxassetid://5554236805"
ButtonShadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
ButtonShadow.ImageTransparency = 0.6
ButtonShadow.ScaleType = Enum.ScaleType.Slice
ButtonShadow.SliceCenter = Rect.new(23, 23, 277, 277)

Name_2.Name = "Name"
Name_2.Parent = Button
Name_2.AnchorPoint = Vector2.new(0, 0.5)
Name_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Name_2.BackgroundTransparency = 1
Name_2.BorderSizePixel = 0
Name_2.Position = UDim2.new(0.05, 0, 0.5, 0)
Name_2.Size = UDim2.new(0.95, 0, 0.82, 0)
Name_2.ZIndex = 3
Name_2.Font = Enum.Font.TitilliumWeb
Name_2.Text = "Enabled"
Name_2.TextColor3 = Color3.fromRGB(255, 255, 255)
Name_2.TextScaled = true
Name_2.TextSize = 14
Name_2.TextWrapped = true
Name_2.TextXAlignment = Enum.TextXAlignment.Left
Name_2.TextYAlignment = Enum.TextYAlignment.Bottom

UIGradient_2.Color = ColorSequence.new{ColorSequenceKeypoint.new(0.00, Color3.fromRGB(255, 255, 255)), ColorSequenceKeypoint.new(1.00, Color3.fromRGB(180, 180, 180))}
UIGradient_2.Transparency = NumberSequence.new(0.2)
UIGradient_2.Parent = Button

tab.Name = "Tab"
tab.Visible = false
tab.BackgroundTransparency = 1
tab.Size = UDim2.new(0.95, 0, 0.025, 0)

Close.Name = "Close"
Close.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Close.BackgroundTransparency = 1
Close.BorderSizePixel = 0
Close.Position = UDim2.new(0.8, 0, 0.1, 0)
Close.Size = UDim2.new(0.15, 0, 0.125, 0)
Close.ZIndex = 2
Close.Font = Enum.Font.FredokaOne
Close.Text = "X"
Close.TextColor3 = Color3.fromRGB(255, 0, 0)
Close.TextScaled = true
Close.TextSize = 14
Close.TextWrapped = true
Close.TextXAlignment = Enum.TextXAlignment.Right
Close.Parent = Main

-- Close Button Shadow
CloseShadow.Name = "CloseShadow"
CloseShadow.Parent = Close
CloseShadow.AnchorPoint = Vector2.new(0.5, 0.5)
CloseShadow.BackgroundTransparency = 1
CloseShadow.BorderSizePixel = 0
CloseShadow.Position = UDim2.new(0.5, 0, 0.5, 0)
CloseShadow.Size = UDim2.new(1, 4, 1, 4)
CloseShadow.ZIndex = 1
CloseShadow.Image = "rbxassetid://5554236805"
CloseShadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
CloseShadow.ImageTransparency = 0.7
CloseShadow.ScaleType = Enum.ScaleType.Slice
CloseShadow.SliceCenter = Rect.new(23, 23, 277, 277)

ComboElem.Name = "ComboElem"
ComboElem.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
ComboElem.BackgroundTransparency = 0.1
ComboElem.Size = UDim2.new(0.95, 0, 0, 50)
ComboElem.ZIndex = 2

UICorner_7.CornerRadius = UDim.new(0.25, 0)
UICorner_7.Parent = ComboElem

-- ComboElem Shadow
ComboElemShadow.Name = "ComboElemShadow"
ComboElemShadow.Parent = ComboElem
ComboElemShadow.AnchorPoint = Vector2.new(0.5, 0.5)
ComboElemShadow.BackgroundTransparency = 1
ComboElemShadow.BorderSizePixel = 0
ComboElemShadow.Position = UDim2.new(0.5, 0, 0.5, 0)
ComboElemShadow.Size = UDim2.new(1, 6, 1, 6)
ComboElemShadow.ZIndex = 1
ComboElemShadow.Image = "rbxassetid://5554236805"
ComboElemShadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
ComboElemShadow.ImageTransparency = 0.6
ComboElemShadow.ScaleType = Enum.ScaleType.Slice
ComboElemShadow.SliceCenter = Rect.new(23, 23, 277, 277)

Name_3.Name = "Name"
Name_3.Parent = ComboElem
Name_3.AnchorPoint = Vector2.new(0, 0.5)
Name_3.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Name_3.BackgroundTransparency = 1
Name_3.BorderSizePixel = 0
Name_3.Position = UDim2.new(0.05, 0, 0.5, 0)
Name_3.Size = UDim2.new(0.75, 0, 0.8, 0)
Name_3.ZIndex = 3
Name_3.Font = Enum.Font.TitilliumWeb
Name_3.Text = "Enabled"
Name_3.TextColor3 = Color3.fromRGB(255, 255, 255)
Name_3.TextScaled = true
Name_3.TextSize = 14
Name_3.TextWrapped = true
Name_3.TextXAlignment = Enum.TextXAlignment.Left
Name_3.TextYAlignment = Enum.TextYAlignment.Bottom

UIGradient_3.Color = ColorSequence.new{ColorSequenceKeypoint.new(0.00, Color3.fromRGB(255, 255, 255)), ColorSequenceKeypoint.new(1.00, Color3.fromRGB(180, 180, 180))}
UIGradient_3.Rotation = 180
UIGradient_3.Transparency = NumberSequence.new(0.2)
UIGradient_3.Parent = ComboElem

Img.Name = "Img"
Img.Parent = ComboElem
Img.AnchorPoint = Vector2.new(1, 0.5)
Img.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Img.BackgroundTransparency = 1
Img.BorderSizePixel = 0
Img.Position = UDim2.new(0.975, 0, 0.5, 0)
Img.Rotation = 90
Img.Size = UDim2.new(0.75, 0, 0.75, 0)
Img.ZIndex = 3
Img.Font = Enum.Font.FredokaOne
Img.Text = "^"
Img.TextColor3 = Color3.fromRGB(255, 255, 255)
Img.TextScaled = true
Img.TextSize = 14
Img.TextWrapped = true

UIAspectRatioConstraint_4.Parent = Img

ComboBox.Name = "ComboBox"
ComboBox.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
ComboBox.BackgroundTransparency = 0.1
ComboBox.Size = UDim2.new(0.95, 0, 0, 50)
ComboBox.ZIndex = 2

UICorner_8.CornerRadius = UDim.new(0.25, 0)
UICorner_8.Parent = ComboBox

-- ComboBox Shadow
ComboBoxShadow.Name = "ComboBoxShadow"
ComboBoxShadow.Parent = ComboBox
ComboBoxShadow.AnchorPoint = Vector2.new(0.5, 0.5)
ComboBoxShadow.BackgroundTransparency = 1
ComboBoxShadow.BorderSizePixel = 0
ComboBoxShadow.Position = UDim2.new(0.5, 0, 0.5, 0)
ComboBoxShadow.Size = UDim2.new(1, 6, 1, 6)
ComboBoxShadow.ZIndex = 1
ComboBoxShadow.Image = "rbxassetid://5554236805"
ComboBoxShadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
ComboBoxShadow.ImageTransparency = 0.6
ComboBoxShadow.ScaleType = Enum.ScaleType.Slice
ComboBoxShadow.SliceCenter = Rect.new(23, 23, 277, 277)

Name_4.Name = "Name"
Name_4.Parent = ComboBox
Name_4.AnchorPoint = Vector2.new(0, 0.5)
Name_4.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Name_4.BackgroundTransparency = 1.000
Name_4.BorderSizePixel = 0
Name_4.Position = UDim2.new(0.05, 0, 0.5, 0)
Name_4.Size = UDim2.new(0.75, 0, 0.8, 0)
Name_4.ZIndex = 3
Name_4.Font = Enum.Font.TitilliumWeb
Name_4.Text = "Enabled"
Name_4.TextColor3 = Color3.fromRGB(255, 255, 255)
Name_4.TextScaled = true
Name_4.TextSize = 14
Name_4.TextWrapped = true
Name_4.TextXAlignment = Enum.TextXAlignment.Left
Name_4.TextYAlignment = Enum.TextYAlignment.Bottom

UIGradient_4.Color = ColorSequence.new{ColorSequenceKeypoint.new(0.00, Color3.fromRGB(255, 255, 255)), ColorSequenceKeypoint.new(1.00, Color3.fromRGB(180, 180, 180))}
UIGradient_4.Transparency = NumberSequence.new(0.2)
UIGradient_4.Parent = ComboBox

Img_2.Name = "Img"
Img_2.Parent = ComboBox
Img_2.AnchorPoint = Vector2.new(1, 0.5)
Img_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Img_2.BackgroundTransparency = 1
Img_2.BorderSizePixel = 0
Img_2.Rotation = 180
Img_2.Position = UDim2.new(0.975, 0, 0.5, 0)
Img_2.Size = UDim2.new(0.75, 0, 0.75, 0)
Img_2.ZIndex = 3
Img_2.Font = Enum.Font.FredokaOne
Img_2.Text = "^"
Img_2.TextColor3 = Color3.fromRGB(255, 0, 0)
Img_2.TextScaled = true
Img_2.TextSize = 14
Img_2.TextWrapped = true

UIAspectRatioConstraint_5.Parent = Img_2

-- Input Box Properties:
InputBox.Name = "InputBox"
InputBox.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
InputBox.BackgroundTransparency = 0.1
InputBox.Size = UDim2.new(0.95, 0, 0, 50)
InputBox.AutoButtonColor = false
InputBox.ZIndex = 2

UICorner_9.CornerRadius = UDim.new(0.25, 0)
UICorner_9.Parent = InputBox

-- InputBox Shadow
InputBoxShadow.Name = "InputBoxShadow"
InputBoxShadow.Parent = InputBox
InputBoxShadow.AnchorPoint = Vector2.new(0.5, 0.5)
InputBoxShadow.BackgroundTransparency = 1
InputBoxShadow.BorderSizePixel = 0
InputBoxShadow.Position = UDim2.new(0.5, 0, 0.5, 0)
InputBoxShadow.Size = UDim2.new(1, 6, 1, 6)
InputBoxShadow.ZIndex = 1
InputBoxShadow.Image = "rbxassetid://5554236805"
InputBoxShadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
InputBoxShadow.ImageTransparency = 0.6
InputBoxShadow.ScaleType = Enum.ScaleType.Slice
InputBoxShadow.SliceCenter = Rect.new(23, 23, 277, 277)

Name_5.Name = "Name"
Name_5.Parent = InputBox
Name_5.AnchorPoint = Vector2.new(0, 0.5)
Name_5.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Name_5.BackgroundTransparency = 1
Name_5.BorderSizePixel = 0
Name_5.Position = UDim2.new(0.05, 0, 0.5, 0)
Name_5.Size = UDim2.new(0.75, 0, 0.8, 0)
Name_5.ZIndex = 3
Name_5.Font = Enum.Font.TitilliumWeb
Name_5.Text = "Input Box"
Name_5.TextColor3 = Color3.fromRGB(255, 255, 255)
Name_5.TextScaled = true
Name_5.TextSize = 14
Name_5.TextWrapped = true
Name_5.TextXAlignment = Enum.TextXAlignment.Left
Name_5.TextYAlignment = Enum.TextYAlignment.Bottom

UIGradient_5.Color = ColorSequence.new{ColorSequenceKeypoint.new(0.00, Color3.fromRGB(255, 255, 255)), ColorSequenceKeypoint.new(1.00, Color3.fromRGB(180, 180, 180))}
UIGradient_5.Transparency = NumberSequence.new(0.2)
UIGradient_5.Parent = InputBox

TextBox.Name = "TextBox"
TextBox.Parent = InputBox
TextBox.AnchorPoint = Vector2.new(1, 0.5)
TextBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
TextBox.BackgroundTransparency = 0.2
TextBox.BorderSizePixel = 0
TextBox.Position = UDim2.new(0.95, 0, 0.5, 0)
TextBox.Size = UDim2.new(0.35, 0, 0.6, 0)
TextBox.ZIndex = 3
TextBox.Font = Enum.Font.TitilliumWeb
TextBox.PlaceholderColor3 = Color3.fromRGB(180, 180, 180)
TextBox.PlaceholderText = "Enter text..."
TextBox.Text = ""
TextBox.TextColor3 = Color3.fromRGB(255, 255, 255)
TextBox.TextScaled = true
TextBox.TextSize = 14
TextBox.TextWrapped = true

UICorner_10.CornerRadius = UDim.new(0.2, 0)
UICorner_10.Parent = TextBox

-- TextBox Shadow
TextBoxShadow.Name = "TextBoxShadow"
TextBoxShadow.Parent = TextBox
TextBoxShadow.AnchorPoint = Vector2.new(0.5, 0.5)
TextBoxShadow.BackgroundTransparency = 1
TextBoxShadow.BorderSizePixel = 0
TextBoxShadow.Position = UDim2.new(0.5, 0, 0.5, 0)
TextBoxShadow.Size = UDim2.new(1, 4, 1, 4)
TextBoxShadow.ZIndex = 2
TextBoxShadow.Image = "rbxassetid://5554236805"
TextBoxShadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
TextBoxShadow.ImageTransparency = 0.7
TextBoxShadow.ScaleType = Enum.ScaleType.Slice
TextBoxShadow.SliceCenter = Rect.new(23, 23, 277, 277)

-- SCRIPT

local TweenService = game:GetService("TweenService")

-- Helper function for smooth fade animations
local function fadeIn(obj, duration)
    local tween = TweenService:Create(obj, TweenInfo.new(duration or 0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        BackgroundTransparency = obj.BackgroundTransparency - 0.2
    })
    tween:Play()
    return tween
end

local function fadeOut(obj, duration)
    local tween = TweenService:Create(obj, TweenInfo.new(duration or 0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        BackgroundTransparency = obj.BackgroundTransparency + 0.2
    })
    tween:Play()
    return tween
end

-- Helper function to get shadow for an element
local function getShadow(element)
    return element:FindFirstChildWhichIsA("ImageLabel") and element:FindFirstChildWhichIsA("ImageLabel").Name:find("Shadow") and element:FindFirstChildWhichIsA("ImageLabel") or nil
end

-- Smooth hover effects with shadow animations
local function setupHoverEffects(button)
    local originalTransparency = button.BackgroundTransparency
    local shadow = getShadow(button)
    local originalShadowTransparency = shadow and shadow.ImageTransparency or 0.6
    
    button.MouseEnter:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundTransparency = math.max(0, originalTransparency - 0.05)
        }):Play()
        
        if shadow then
            TweenService:Create(shadow, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                ImageTransparency = math.max(0, originalShadowTransparency - 0.2)
            }):Play()
        end
    end)
    
    button.MouseLeave:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundTransparency = originalTransparency
        }):Play()
        
        if shadow then
            TweenService:Create(shadow, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                ImageTransparency = originalShadowTransparency
            }):Play()
        end
    end)
end

-- Enhanced close animation with fade effects
Close.MouseButton1Click:Connect(function()
    Logo.Active = true
    
    -- Fade in intro background
    TweenService:Create(Intro, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        BackgroundTransparency = 0
    }):Play()

    task.wait(0.3)
    
    -- Animate logo
    local logoSizeTween = TweenService:Create(Logo, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        Size = UDim2.fromScale(0.75, 0.75),
        Position = UDim2.fromScale(0.5, 0.5)
    })
    logoSizeTween:Play()

    task.wait(0.3)
    
    -- Shrink main window with fade
    local mainSizeTween = TweenService:Create(Main, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        Size = UDim2.fromScale(0.1, 0.175)
    })
    mainSizeTween:Play()
    
    -- Fade out main shadow
    TweenService:Create(MainShadow, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        ImageTransparency = 0.9
    }):Play()

    task.wait(0.3)
    
    -- Fade out all elements except intro
    for _, obj in pairs(Main:GetChildren()) do
        if obj:IsA("GuiObject") and obj ~= Intro and obj ~= MainShadow then
            if obj:IsA("TextLabel") or obj:IsA("TextButton") then
                TweenService:Create(obj, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    TextTransparency = 1
                }):Play()
                
                -- Fade out shadows of text elements
                local shadow = getShadow(obj)
                if shadow then
                    TweenService:Create(shadow, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        ImageTransparency = 0.9
                    }):Play()
                end
            end
            obj.Visible = false
        end
    end

    -- Fade effects for logo and background
    TweenService:Create(Logo, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        ImageTransparency = 0.8
    }):Play()
    
    TweenService:Create(Intro, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        BackgroundTransparency = 1
    }):Play()
    
    TweenService:Create(Main, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        BackgroundTransparency = 0.8
    }):Play()
end)

-- Enhanced open animation with fade effects
Logo.MouseButton1Click:Connect(function()
    Logo.Active = false
    
    -- Reset transparencies
    TweenService:Create(Logo, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        ImageTransparency = 0
    }):Play()
    
    TweenService:Create(Intro, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        BackgroundTransparency = 0
    }):Play()
    
    TweenService:Create(Main, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        BackgroundTransparency = 0.15
    }):Play()
    
    -- Fade in main shadow
    TweenService:Create(MainShadow, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        ImageTransparency = 0.8
    }):Play()

    task.wait(0.3)
    
    -- Expand main window
    local mainSizeTween = TweenService:Create(Main, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        Size = UDim2.fromScale(0.3, 0.3)
    })
    mainSizeTween:Play()

    task.wait(0.3)
    
    -- Move logo to corner
    local logoTween = TweenService:Create(Logo, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        Size = UDim2.fromScale(0.175, 0.175),
        Position = UDim2.fromScale(0.075, 0.15)
    })
    logoTween:Play()

    -- Show and fade in all elements
    for _, obj in pairs(Main:GetChildren()) do
        if obj:IsA("GuiObject") and obj ~= Intro and obj ~= MainShadow then
            obj.Visible = true
            if obj:IsA("TextLabel") or obj:IsA("TextButton") then
                obj.TextTransparency = 1
                TweenService:Create(obj, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    TextTransparency = 0
                }):Play()
                
                -- Fade in shadows of text elements
                local shadow = getShadow(obj)
                if shadow then
                    shadow.ImageTransparency = 0.9
                    TweenService:Create(shadow, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        ImageTransparency = obj.Name == "Close" and 0.7 or 0.6
                    }):Play()
                end
            end
        end
    end

    task.wait(0.3)
    
    -- Fade out intro background
    TweenService:Create(Intro, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        BackgroundTransparency = 1
    }):Play()
end)

local function uiparent()
    local success, parent = pcall(function()
        return gethui()
    end)

    if not success then
        return game:GetService("CoreGui")
    end

    return parent
end

local success, err = pcall(function()
    Arceus.Parent = uiparent()
end)

if not success then
    Arceus.Parent = game:GetService("Players").LocalPlayer.PlayerGui
end

local element_height = 50*Menu.AbsoluteSize.Y/210
local elements = 0

local function AddSpace(parent)
    local space = tab:Clone()
    space.Parent = parent
    space.LayoutOrder = elements
    space.Visible = true

    elements += 1
end

-- Add fade animation when adding new elements
function lib:AddToggle(name, funct, enabled, ...)
    local newTog = Toggle:Clone()
    local args = {...}
    
    -- Setup hover effects
    setupHoverEffects(newTog)
    
    newTog.MouseButton1Click:Connect(function()
        enabled = not enabled
        
        -- Animate the check mark
        local check = newTog:WaitForChild("Enabled"):WaitForChild("Check")
        local tween = TweenService:Create(check, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundColor3 = enabled and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
        })
        tween:Play()
        
        check.Visible = enabled
        funct(enabled, unpack(args))
    end)

    newTog:WaitForChild("Enabled"):WaitForChild("Check").Visible = enabled
    newTog:WaitForChild("Name").Text = name

    newTog.Size = UDim2.new(0.95, 0, 0, element_height)
    newTog.Name = name
    newTog.Parent = Menu
    newTog.LayoutOrder = elements
    newTog.Visible = false
    
    -- Fade in animation with shadow
    newTog.BackgroundTransparency = 1
    newTog.Name.TextTransparency = 1
    local shadow = getShadow(newTog)
    if shadow then
        shadow.ImageTransparency = 1
    end
    newTog.Visible = true
    
    local fadeTween = TweenService:Create(newTog, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        BackgroundTransparency = 0.1
    })
    fadeTween:Play()
    
    TweenService:Create(newTog.Name, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        TextTransparency = 0
    }):Play()
    
    if shadow then
        TweenService:Create(shadow, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            ImageTransparency = 0.6
        }):Play()
    end

    elements += 1
    AddSpace(Menu)

    return newTog
end

function lib:AddButton(name, funct, ...)
    local newBut = Button:Clone()
    local args = {...}
    
    -- Setup hover effects
    setupHoverEffects(newBut)
    
    newBut.MouseButton1Click:Connect(function()
        -- Click animation with shadow
        TweenService:Create(newBut, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundTransparency = 0
        }):Play()
        
        local shadow = getShadow(newBut)
        if shadow then
            TweenService:Create(shadow, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                ImageTransparency = 0.4
            }):Play()
        end
        
        task.wait(0.1)
        
        TweenService:Create(newBut, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundTransparency = 0.1
        }):Play()
        
        if shadow then
            TweenService:Create(shadow, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                ImageTransparency = 0.6
            }):Play()
        end
        
        funct(unpack(args))
    end)

    newBut:WaitForChild("Name").Text = name
    newBut.Size = UDim2.new(0.95, 0, 0, element_height)
    newBut.Name = name
    newBut.Parent = Menu
    newBut.LayoutOrder = elements
    newBut.Visible = false
    
    -- Fade in animation with shadow
    newBut.BackgroundTransparency = 1
    newBut.Name.TextTransparency = 1
    local shadow = getShadow(newBut)
    if shadow then
        shadow.ImageTransparency = 1
    end
    newBut.Visible = true
    
    local fadeTween = TweenService:Create(newBut, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        BackgroundTransparency = 0.1
    })
    fadeTween:Play()
    
    TweenService:Create(newBut.Name, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        TextTransparency = 0
    }):Play()
    
    if shadow then
        TweenService:Create(shadow, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            ImageTransparency = 0.6
        }):Play()
    end

    elements += 1
    AddSpace(Menu)

    return newBut
end

function lib:AddInputBox(name, funct, placeholder, default, ...)
    local newInput = InputBox:Clone()
    local args = {...}
    
    -- Setup hover effects
    setupHoverEffects(newInput)
    
    newInput:WaitForChild("Name").Text = name
    if placeholder then
        newInput.TextBox.PlaceholderText = placeholder
    end
    if default then
        newInput.TextBox.Text = default
    end
    
    local textBox = newInput.TextBox
    local textBoxShadow = textBox:FindFirstChild("TextBoxShadow")
    
    -- Function to handle text submission
    local function submitText()
        local text = textBox.Text
        funct(text, unpack(args))
    end
    
    -- Submit on Enter key with animation
    textBox.FocusLost:Connect(function(enterPressed)
        if enterPressed then
            -- Animate text box on submit
            TweenService:Create(textBox, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                BackgroundTransparency = 0.1
            }):Play()
            
            if textBoxShadow then
                TweenService:Create(textBoxShadow, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    ImageTransparency = 0.5
                }):Play()
            end
            
            submitText()
            task.wait(0.1)
            TweenService:Create(textBox, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                BackgroundTransparency = 0.2
            }):Play()
            
            if textBoxShadow then
                TweenService:Create(textBoxShadow, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    ImageTransparency = 0.7
                }):Play()
            end
        end
    end)
    
    -- Animate on focus
    textBox.Focused:Connect(function()
        TweenService:Create(textBox, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundTransparency = 0.1
        }):Play()
        
        if textBoxShadow then
            TweenService:Create(textBoxShadow, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                ImageTransparency = 0.5
            }):Play()
        end
    end)
    
    textBox.FocusLost:Connect(function()
        TweenService:Create(textBox, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundTransparency = 0.2
        }):Play()
        
        if textBoxShadow then
            TweenService:Create(textBoxShadow, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                ImageTransparency = 0.7
            }):Play()
        end
    end)
    
    newInput.Size = UDim2.new(0.95, 0, 0, element_height)
    newInput.Name = name
    newInput.Parent = Menu
    newInput.LayoutOrder = elements
    newInput.Visible = false
    
    -- Fade in animation with shadow
    newInput.BackgroundTransparency = 1
    newInput.Name.TextTransparency = 1
    local shadow = getShadow(newInput)
    if shadow then
        shadow.ImageTransparency = 1
    end
    newInput.Visible = true
    
    local fadeTween = TweenService:Create(newInput, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        BackgroundTransparency = 0.1
    })
    fadeTween:Play()
    
    TweenService:Create(newInput.Name, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        TextTransparency = 0
    }):Play()
    
    if shadow then
        TweenService:Create(shadow, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            ImageTransparency = 0.6
        }):Play()
    end
    
    elements += 1
    AddSpace(Menu)
    
    local inputObj = {
        Frame = newInput,
        TextBox = textBox,
        GetText = function()
            return textBox.Text
        end,
        SetText = function(newText)
            textBox.Text = newText or ""
        end,
        Clear = function()
            textBox.Text = ""
        end,
        SetPlaceholder = function(placeholderText)
            textBox.PlaceholderText = placeholderText or "Enter text..."
        end
    }
    
    return inputObj
end

function lib:AddComboBox(text, options, funct, ...)
    local newCombo = ComboBox:Clone()
    local enabled = false
    local elems = {}
    local args = {...}
    
    -- Setup hover effects
    setupHoverEffects(newCombo)

    local function setBoxState()
        local img = newCombo:WaitForChild("Img")
        TweenService:Create(img, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            Rotation = enabled and 0 or 180
        }):Play()
        
        for _, elem in ipairs(elems) do
            if enabled then
                elem.Visible = true
                TweenService:Create(elem, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundTransparency = 0.1
                }):Play()
                
                local shadow = getShadow(elem)
                if shadow then
                    TweenService:Create(shadow, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        ImageTransparency = 0.6
                    }):Play()
                end
            else
                TweenService:Create(elem, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundTransparency = 1
                }):Play()
                
                local shadow = getShadow(elem)
                if shadow then
                    TweenService:Create(shadow, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                        ImageTransparency = 1
                    }):Play()
                end
                
                task.wait(0.15)
                elem.Visible = false
            end
        end
    end

    newCombo.MouseButton1Click:Connect(function()
        enabled = not enabled
        setBoxState()
    end)

    newCombo:WaitForChild("Name").Text = text .. ": " .. (#options > 0 and options[1] or "")
    newCombo.Size = UDim2.new(0.95, 0, 0, element_height)
    newCombo.Name = #options > 0 and options[1] or ""
    newCombo.Parent = Menu
    newCombo.LayoutOrder = elements
    newCombo.Visible = false
    
    -- Fade in animation with shadow
    newCombo.BackgroundTransparency = 1
    newCombo.Name.TextTransparency = 1
    local shadow = getShadow(newCombo)
    if shadow then
        shadow.ImageTransparency = 1
    end
    newCombo.Visible = true
    
    local fadeTween = TweenService:Create(newCombo, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        BackgroundTransparency = 0.1
    })
    fadeTween:Play()
    
    TweenService:Create(newCombo.Name, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        TextTransparency = 0
    }):Play()
    
    if shadow then
        TweenService:Create(shadow, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            ImageTransparency = 0.6
        }):Play()
    end

    elements += 1
    AddSpace(Menu)

    for _, name in ipairs(options) do
        local newElem = ComboElem:Clone()
        table.insert(elems, newElem)
        
        -- Setup hover effects for dropdown items
        setupHoverEffects(newElem)

        newElem.MouseButton1Click:Connect(function()
            TweenService:Create(newCombo.Name, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                Text = text .. ": " .. name
            }):Play()
            enabled = false
            setBoxState()
            funct(name, unpack(args))
        end)

        newElem:WaitForChild("Name").Text = name
        newElem.Size = UDim2.new(0.95, 0, 0, element_height)
        newElem.Name = name
        newElem.Parent = Menu
        newElem.LayoutOrder = elements
        newElem.Visible = false
        newElem.BackgroundTransparency = 1
        
        local elemShadow = getShadow(newElem)
        if elemShadow then
            elemShadow.ImageTransparency = 1
        end

        elements += 1
        AddSpace(Menu)
    end

    return newCombo
end

function lib:SetTitle(txt)
    Title.Text = txt
end

function lib:SetIcon(img)
    Logo.Image = img
end

function lib:SetBackgroundColor(r, g ,b)
    Main.BackgroundColor3 = Color3.fromRGB(r, g, b)
    Intro.BackgroundColor3 = Color3.fromRGB(r, g, b)
end

function lib:SetTitleColor(r, g, b)
    Title.TextColor3 = Color3.fromRGB(r, g, b)
end

function lib:SetCloseBtnColor(r, g, b)
    Close.TextColor3 = Color3.fromRGB(r, g, b)
    Img_2.TextColor3 = Color3.fromRGB(r, g, b)
    Check.BackgroundColor3 = Color3.fromRGB(r, g, b)
    if CloseShadow then
        CloseShadow.ImageColor3 = Color3.fromRGB(r, g, b)
    end
end

function lib:SetButtonsColor(r, g ,b)
    Toggle.BackgroundColor3 = Color3.fromRGB(r, g, b)
    Button.BackgroundColor3 = Color3.fromRGB(r, g, b)
    ComboElem.BackgroundColor3 = Color3.fromRGB(r, g, b)
    ComboBox.BackgroundColor3 = Color3.fromRGB(r, g, b)
    InputBox.BackgroundColor3 = Color3.fromRGB(r, g, b)
end

function lib:SetInputBoxColor(r, g, b)
    InputBox.BackgroundColor3 = Color3.fromRGB(r, g, b)
    TextBox.BackgroundColor3 = Color3.fromRGB(math.max(0, r-15), math.max(0, g-15), math.max(0, b-15))
end

function lib:SetTheme(theme)
    if theme == "Default" then
        -- Keep default colors
    elseif theme == "TomorrowNightBlue" then
        lib:SetButtonsColor(74, 208, 238)
        lib:SetCloseBtnColor(74, 208, 238)
        lib:SetBackgroundColor(5, 16, 58)
        lib:SetInputBoxColor(74, 208, 238)
        MainShadow.ImageColor3 = Color3.fromRGB(74, 208, 238)
        TitleShadow.ImageColor3 = Color3.fromRGB(74, 208, 238)
    elseif theme == "HighContrast" then
        lib:SetBackgroundColor(0, 0, 0)
        lib:SetButtonsColor(0, 0, 0)
        lib:SetCloseBtnColor(255, 255, 0)
        lib:SetInputBoxColor(0, 0, 0)
        MainShadow.ImageColor3 = Color3.fromRGB(255, 255, 255)
        TitleShadow.ImageColor3 = Color3.fromRGB(255, 255, 255)
    elseif theme == "Aqua" then
        lib:SetBackgroundColor(44, 62, 82)
        lib:SetButtonsColor(52, 74, 95)
        lib:SetCloseBtnColor(26, 189, 158)
        lib:SetInputBoxColor(52, 74, 95)
        MainShadow.ImageColor3 = Color3.fromRGB(26, 189, 158)
        TitleShadow.ImageColor3 = Color3.fromRGB(26, 189, 158)
    elseif theme == "Ocean" then
        lib:SetBackgroundColor(26, 32, 58)
        lib:SetButtonsColor(38, 45, 71)
        lib:SetCloseBtnColor(86, 76, 251)
        lib:SetInputBoxColor(38, 45, 71)
        MainShadow.ImageColor3 = Color3.fromRGB(86, 76, 251)
        TitleShadow.ImageColor3 = Color3.fromRGB(86, 76, 251)
    else
        error("Theme not found.")
    end
end

-- INIT with enhanced animations

-- Initial fade in animation
Main.BackgroundTransparency = 1
MainShadow.ImageTransparency = 1
Intro.BackgroundTransparency = 1
Logo.ImageTransparency = 1

-- Apply hover effects to all base elements
for _, element in pairs({Toggle, Button, ComboElem, ComboBox, InputBox, Close}) do
    setupHoverEffects(element)
end

-- Main entrance animation
Main:TweenPosition(
    UDim2.fromScale(0.5, 0.5),
    Enum.EasingDirection.Out,
    Enum.EasingStyle.Quad,
    1, true, nil
)

TweenService:Create(Main, TweenInfo.new(1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
    BackgroundTransparency = 0.15
}):Play()

TweenService:Create(MainShadow, TweenInfo.new(1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
    ImageTransparency = 0.8
}):Play()

task.wait(0.5)

TweenService:Create(Intro, TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
    BackgroundTransparency = 0
}):Play()

TweenService:Create(Logo, TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
    ImageTransparency = 0
}):Play()

task.wait(1.5)

Logo:TweenSizeAndPosition(
    UDim2.fromScale(0.175, 0.175),
    UDim2.fromScale(0.075, 0.15),
    Enum.EasingDirection.Out,
    Enum.EasingStyle.Quad,
    1, true, nil
)

task.wait(1)

-- Fade out intro background
TweenService:Create(Intro, TweenInfo.new(1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
    BackgroundTransparency = 1
}):Play()

-- Fade in UI elements with shadows
for _, obj in pairs(Main:GetChildren()) do
    if obj:IsA("GuiObject") and obj ~= Intro and obj ~= MainShadow then
        if obj:IsA("TextLabel") or obj:IsA("TextButton") then
            obj.TextTransparency = 1
            TweenService:Create(obj, TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                TextTransparency = 0
            }):Play()
            
            -- Fade in shadows of text elements
            local shadow = getShadow(obj)
            if shadow then
                shadow.ImageTransparency = 0.9
                TweenService:Create(shadow, TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    ImageTransparency = obj.Name == "Close" and 0.7 or 0.6
                }):Play()
            end
        end
    end
end

return lib
