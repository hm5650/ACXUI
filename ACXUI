-- Arceus X UI Library with Silent Aim GUI Style
local lib = {}

local Script_Title = "Arceus X | UI Library"

-- Instances:
local Arceus = Instance.new("ScreenGui")
local Main = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local TitleBar = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local MinimizeButton = Instance.new("TextButton")
local ContentFrame = Instance.new("Frame")
local Menu = Instance.new("ScrollingFrame")
local UIListLayout = Instance.new("UIListLayout")
local Toggle = Instance.new("Frame")
local UICorner_2 = Instance.new("UICorner")
local ToggleButton = Instance.new("TextButton")
local ToggleStatus = Instance.new("TextLabel")
local ToggleName = Instance.new("TextLabel")
local Button = Instance.new("Frame")
local UICorner_3 = Instance.new("UICorner")
local ButtonLabel = Instance.new("TextLabel")
local tab = Instance.new("Frame")
local Close = Instance.new("TextButton")
local ComboElem = Instance.new("Frame")
local UICorner_4 = Instance.new("UICorner")
local ComboElemLabel = Instance.new("TextLabel")
local ComboBox = Instance.new("Frame")
local UICorner_5 = Instance.new("UICorner")
local ComboLabel = Instance.new("TextLabel")
local ComboStatus = Instance.new("TextLabel")
local DropdownArrow = Instance.new("TextLabel")

-- New Input Box Instances:
local InputBox = Instance.new("Frame")
local UICorner_6 = Instance.new("UICorner")
local InputLabel = Instance.new("TextLabel")
local TextBox = Instance.new("TextBox")
local UICorner_7 = Instance.new("UICorner")

-- Properties:

Arceus.Name = "ArceusX"
Arceus.Enabled = true
Arceus.ResetOnSpawn = true
Arceus.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
Arceus.DisplayOrder = 999999999

Main.Name = "MainFrame"
Main.Parent = Arceus
Main.Active = true
Main.Draggable = true
Main.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Main.BorderSizePixel = 0
Main.Position = UDim2.new(0.5, -150, 0.5, -100)
Main.Size = UDim2.new(0, 300, 0, 220)

UICorner.CornerRadius = UDim.new(0, 4)
UICorner.Parent = Main

TitleBar.Name = "TitleBar"
TitleBar.Size = UDim2.new(1, 0, 0, 20)
TitleBar.Position = UDim2.new(0, 0, 0, 0)
TitleBar.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
TitleBar.BorderSizePixel = 0
TitleBar.Parent = Main

Title.Name = "Title"
Title.Size = UDim2.new(0.7, 0, 1, 0)
Title.Position = UDim2.new(0, 5, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = Script_Title
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Font = Enum.Font.Gotham
Title.TextSize = 12
Title.Parent = TitleBar

MinimizeButton.Name = "MinimizeButton"
MinimizeButton.Size = UDim2.new(0, 20, 0, 20)
MinimizeButton.Position = UDim2.new(1, -20, 0, 0)
MinimizeButton.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
MinimizeButton.BorderSizePixel = 0
MinimizeButton.Text = "_"
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.Font = Enum.Font.Gotham
MinimizeButton.TextSize = 14
MinimizeButton.Parent = TitleBar

ContentFrame.Name = "ContentFrame"
ContentFrame.Size = UDim2.new(1, 0, 1, -20)
ContentFrame.Position = UDim2.new(0, 0, 0, 20)
ContentFrame.BackgroundTransparency = 1
ContentFrame.Parent = Main

Menu.Name = "Menu"
Menu.Parent = ContentFrame
Menu.Active = true
Menu.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Menu.BackgroundTransparency = 1
Menu.AutomaticCanvasSize = Enum.AutomaticSize.Y
Menu.BorderSizePixel = 0
Menu.Size = UDim2.new(1, 0, 1, 0)
Menu.CanvasSize = UDim2.new(0, 0, 0, 0)
Menu.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 100)
Menu.ScrollBarThickness = 4
Menu.ScrollBarImageTransparency = 0.7

UIListLayout.Parent = Menu
UIListLayout.Padding = UDim.new(0, 8)
UIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder

Toggle.Name = "Toggle"
Toggle.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Toggle.Size = UDim2.new(0.9, 0, 0, 30)

UICorner_2.CornerRadius = UDim.new(0, 4)
UICorner_2.Parent = Toggle

ToggleButton.Name = "ToggleButton"
ToggleButton.Size = UDim2.new(1, 0, 1, 0)
ToggleButton.BackgroundTransparency = 1
ToggleButton.Text = ""
ToggleButton.Parent = Toggle

ToggleStatus.Name = "ToggleStatus"
ToggleStatus.AnchorPoint = Vector2.new(1, 0.5)
ToggleStatus.Size = UDim2.new(0, 40, 0, 20)
ToggleStatus.Position = UDim2.new(0.95, 0, 0.5, 0)
ToggleStatus.BackgroundTransparency = 1
ToggleStatus.Text = "OFF"
ToggleStatus.TextColor3 = Color3.fromRGB(255, 0, 0)
ToggleStatus.Font = Enum.Font.Gotham
ToggleStatus.TextSize = 12
ToggleStatus.Parent = Toggle

ToggleName.Name = "ToggleName"
ToggleName.Size = UDim2.new(0.6, 0, 1, 0)
ToggleName.Position = UDim2.new(0.05, 0, 0, 0)
ToggleName.BackgroundTransparency = 1
ToggleName.Text = "Toggle"
ToggleName.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleName.TextXAlignment = Enum.TextXAlignment.Left
ToggleName.Font = Enum.Font.Gotham
ToggleName.TextSize = 12
ToggleName.Parent = Toggle

Button.Name = "Button"
Button.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Button.Size = UDim2.new(0.9, 0, 0, 30)

UICorner_3.CornerRadius = UDim.new(0, 4)
UICorner_3.Parent = Button

ButtonLabel.Name = "ButtonLabel"
ButtonLabel.Size = UDim2.new(1, 0, 1, 0)
ButtonLabel.BackgroundTransparency = 1
ButtonLabel.Text = "Button"
ButtonLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ButtonLabel.Font = Enum.Font.Gotham
ButtonLabel.TextSize = 12
ButtonLabel.Parent = Button

tab.Name = "Tab"
tab.BackgroundTransparency = 1
tab.Size = UDim2.new(1, 0, 0, 5)

Close.Name = "Close"
Close.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Close.BackgroundTransparency = 1
Close.BorderSizePixel = 0
Close.Position = UDim2.new(0.9, 0, 0.1, 0)
Close.Size = UDim2.new(0.1, 0, 0.125, 0)
Close.Font = Enum.Font.Gotham
Close.Text = "X"
Close.TextColor3 = Color3.fromRGB(255, 0, 0)
Close.TextSize = 12
Close.Parent = Main

ComboElem.Name = "ComboElem"
ComboElem.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
ComboElem.Size = UDim2.new(0.9, 0, 0, 30)

UICorner_4.CornerRadius = UDim.new(0, 4)
UICorner_4.Parent = ComboElem

ComboElemLabel.Name = "ComboElemLabel"
ComboElemLabel.Size = UDim2.new(1, 0, 1, 0)
ComboElemLabel.BackgroundTransparency = 1
ComboElemLabel.Text = "Option"
ComboElemLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ComboElemLabel.Font = Enum.Font.Gotham
ComboElemLabel.TextSize = 12
ComboElemLabel.Parent = ComboElem

ComboBox.Name = "ComboBox"
ComboBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
ComboBox.Size = UDim2.new(0.9, 0, 0, 30)

UICorner_5.CornerRadius = UDim.new(0, 4)
UICorner_5.Parent = ComboBox

ComboLabel.Name = "ComboLabel"
ComboLabel.Size = UDim2.new(0.6, 0, 1, 0)
ComboLabel.Position = UDim2.new(0.05, 0, 0, 0)
ComboLabel.BackgroundTransparency = 1
ComboLabel.Text = "ComboBox"
ComboLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ComboLabel.TextXAlignment = Enum.TextXAlignment.Left
ComboLabel.Font = Enum.Font.Gotham
ComboLabel.TextSize = 12
ComboLabel.Parent = ComboBox

ComboStatus.Name = "ComboStatus"
ComboStatus.AnchorPoint = Vector2.new(1, 0.5)
ComboStatus.Size = UDim2.new(0.3, 0, 0, 20)
ComboStatus.Position = UDim2.new(0.95, 0, 0.5, 0)
ComboStatus.BackgroundTransparency = 1
ComboStatus.Text = "Option 1"
ComboStatus.TextColor3 = Color3.fromRGB(200, 200, 200)
ComboStatus.Font = Enum.Font.Gotham
ComboStatus.TextSize = 11
ComboStatus.TextXAlignment = Enum.TextXAlignment.Right
ComboStatus.Parent = ComboBox

DropdownArrow.Name = "DropdownArrow"
DropdownArrow.AnchorPoint = Vector2.new(0, 0.5)
DropdownArrow.Size = UDim2.new(0, 10, 0, 10)
DropdownArrow.Position = UDim2.new(0.9, 0, 0.5, 0)
DropdownArrow.BackgroundTransparency = 1
DropdownArrow.Text = "â–¼"
DropdownArrow.TextColor3 = Color3.fromRGB(150, 150, 150)
DropdownArrow.Font = Enum.Font.Gotham
DropdownArrow.TextSize = 10
DropdownArrow.Parent = ComboBox

InputBox.Name = "InputBox"
InputBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
InputBox.Size = UDim2.new(0.9, 0, 0, 30)

UICorner_6.CornerRadius = UDim.new(0, 4)
UICorner_6.Parent = InputBox

InputLabel.Name = "InputLabel"
InputLabel.Size = UDim2.new(0.5, 0, 1, 0)
InputLabel.Position = UDim2.new(0.05, 0, 0, 0)
InputLabel.BackgroundTransparency = 1
InputLabel.Text = "Input Box"
InputLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
InputLabel.TextXAlignment = Enum.TextXAlignment.Left
InputLabel.Font = Enum.Font.Gotham
InputLabel.TextSize = 12
InputLabel.Parent = InputBox

TextBox.Name = "TextBox"
TextBox.Parent = InputBox
TextBox.AnchorPoint = Vector2.new(1, 0.5)
TextBox.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
TextBox.BackgroundTransparency = 0
TextBox.BorderSizePixel = 0
TextBox.Position = UDim2.new(0.95, 0, 0.5, 0)
TextBox.Size = UDim2.new(0.4, 0, 0.7, 0)
TextBox.Font = Enum.Font.Gotham
TextBox.PlaceholderColor3 = Color3.fromRGB(150, 150, 150)
TextBox.PlaceholderText = "Enter text..."
TextBox.Text = ""
TextBox.TextColor3 = Color3.fromRGB(255, 255, 255)
TextBox.TextSize = 12

UICorner_7.CornerRadius = UDim.new(0, 4)
UICorner_7.Parent = TextBox

-- SCRIPT

local TweenService = game:GetService("TweenService")
local minimized = false
local originalSize = Main.Size
local originalPosition = Main.Position

-- Minimize functionality (Silent Aim style)
MinimizeButton.MouseButton1Click:Connect(function()
    minimized = not minimized
    if minimized then
        Main.Size = UDim2.new(0, 300, 0, 20)
        ContentFrame.Visible = false
        MinimizeButton.Text = "+"
    else
        Main.Size = originalSize
        ContentFrame.Visible = true
        MinimizeButton.Text = "_"
    end
end)

-- Close button functionality (Arceus style but with fade)
Close.MouseButton1Click:Connect(function()
    local fadeOut = TweenService:Create(Main, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {BackgroundTransparency = 1})
    fadeOut:Play()
    fadeOut.Completed:Wait()
    Arceus:Destroy()
end)

local function uiparent()
    local success, parent = pcall(function()
        return gethui()
    end)

    if not success then
        return game:GetService("CoreGui")
    end

    return parent
end

local success, err = pcall(function()
    Arceus.Parent = uiparent()
end)

if not success then
    Arceus.Parent = game:GetService("Players").LocalPlayer.PlayerGui
end

local elements = 0

local function AddSpace(parent)
    local space = tab:Clone()
    space.Parent = parent
    space.LayoutOrder = elements
    space.Visible = true

    elements += 1
end

function lib:SetTitle(txt)
    Title.Text = txt
    Script_Title = txt
end

function lib:SetIcon(img)
    -- This function is kept for API compatibility but doesn't apply to Silent Aim style
end

function lib:AddButton(name, funct, ...)
    local newBut = Button:Clone()
    local args = {...}

    newBut.ButtonLabel.Text = name
    
    newBut.MouseButton1Click:Connect(function()
        funct(unpack(args))
    end)

    newBut.MouseEnter:Connect(function()
        TweenService:Create(newBut, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(50, 50, 50)}):Play()
    end)
    
    newBut.MouseLeave:Connect(function()
        TweenService:Create(newBut, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(40, 40, 40)}):Play()
    end)

    newBut.Name = name
    newBut.Parent = Menu
    newBut.LayoutOrder = elements
    newBut.Visible = true

    elements += 1
    AddSpace(Menu)

    return newBut
end

function lib:AddToggle(name, funct, enabled, ...)
    local newTog = Toggle:Clone()
    local args = {...}

    newTog.ToggleName.Text = name
    
    local function updateToggleState(isEnabled)
        if isEnabled then
            newTog.ToggleStatus.Text = "ON"
            newTog.ToggleStatus.TextColor3 = Color3.fromRGB(0, 255, 0)
        else
            newTog.ToggleStatus.Text = "OFF"
            newTog.ToggleStatus.TextColor3 = Color3.fromRGB(255, 0, 0)
        end
    end
    
    newTog.ToggleButton.MouseButton1Click:Connect(function()
        enabled = not enabled
        updateToggleState(enabled)
        funct(enabled, unpack(args))
    end)
    
    newTog.MouseEnter:Connect(function()
        TweenService:Create(newTog, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(50, 50, 50)}):Play()
    end)
    
    newTog.MouseLeave:Connect(function()
        TweenService:Create(newTog, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(40, 40, 40)}):Play()
    end)

    updateToggleState(enabled)
    newTog.Name = name
    newTog.Parent = Menu
    newTog.LayoutOrder = elements
    newTog.Visible = true

    elements += 1
    AddSpace(Menu)

    return newTog
end

function lib:AddInputBox(name, funct, placeholder, default, ...)
    local newInput = InputBox:Clone()
    local args = {...}
    
    newInput.InputLabel.Text = name
    if placeholder then
        newInput.TextBox.PlaceholderText = placeholder
    end
    if default then
        newInput.TextBox.Text = default
    end
    
    local textBox = newInput.TextBox
    
    local function submitText()
        local text = textBox.Text
        funct(text, unpack(args))
    end
    
    textBox.FocusLost:Connect(function(enterPressed)
        if enterPressed then
            submitText()
        end
    end)
    
    textBox.FocusLost:Connect(submitText)
    
    newInput.MouseButton1Click:Connect(function()
        if not textBox:IsFocused() then
            textBox:CaptureFocus()
        end
    end)
    
    newInput.MouseEnter:Connect(function()
        TweenService:Create(newInput, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(50, 50, 50)}):Play()
    end)
    
    newInput.MouseLeave:Connect(function()
        TweenService:Create(newInput, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(40, 40, 40)}):Play()
    end)

    newInput.Name = name
    newInput.Parent = Menu
    newInput.LayoutOrder = elements
    newInput.Visible = true
    
    elements += 1
    AddSpace(Menu)
    
    local inputObj = {
        Frame = newInput,
        TextBox = textBox,
        GetText = function()
            return textBox.Text
        end,
        SetText = function(newText)
            textBox.Text = newText or ""
        end,
        Clear = function()
            textBox.Text = ""
        end,
        SetPlaceholder = function(placeholderText)
            textBox.PlaceholderText = placeholderText or "Enter text..."
        end
    }
    
    return inputObj
end

function lib:AddComboBox(text, options, funct, ...)
    local newCombo = ComboBox:Clone()
    local enabled = false
    local elems = {}
    local args = {...}

    newCombo.ComboLabel.Text = text
    newCombo.ComboStatus.Text = #options > 0 and options[1] or ""
    
    local function setBoxState()
        newCombo.DropdownArrow.Rotation = enabled and 180 or 0
        for _, elem in ipairs(elems) do
            elem.Visible = enabled
        end
    end

    newCombo.MouseButton1Click:Connect(function()
        enabled = not enabled
        setBoxState()
    end)
    
    newCombo.MouseEnter:Connect(function()
        TweenService:Create(newCombo, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(50, 50, 50)}):Play()
    end)
    
    newCombo.MouseLeave:Connect(function()
        TweenService:Create(newCombo, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(40, 40, 40)}):Play()
    end)

    newCombo.Name = #options > 0 and options[1] or ""
    newCombo.Parent = Menu
    newCombo.LayoutOrder = elements
    newCombo.Visible = true

    elements += 1
    AddSpace(Menu)

    for _, name in ipairs(options) do
        local newElem = ComboElem:Clone()
        table.insert(elems, newElem)

        newElem.ComboElemLabel.Text = name
        
        newElem.MouseButton1Click:Connect(function()
            newCombo.ComboStatus.Text = name
            enabled = false
            setBoxState()
            funct(name, unpack(args))
        end)
        
        newElem.MouseEnter:Connect(function()
            TweenService:Create(newElem, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(60, 60, 60)}):Play()
        end)
        
        newElem.MouseLeave:Connect(function()
            TweenService:Create(newElem, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(50, 50, 50)}):Play()
        end)

        newElem.Name = name
        newElem.Parent = Menu
        newElem.LayoutOrder = elements
        newElem.Visible = false

        elements += 1
        AddSpace(Menu)
    end

    return newCombo
end

function lib:SetBackgroundColor(r, g ,b)
    Main.BackgroundColor3 = Color3.fromRGB(r, g, b)
    TitleBar.BackgroundColor3 = Color3.fromRGB(math.max(0, r-10), math.max(0, g-10), math.max(0, b-10))
end

function lib:SetTitleColor(r, g, b)
    Title.TextColor3 = Color3.fromRGB(r, g, b)
end

function lib:SetCloseBtnColor(r, g, b)
    Close.TextColor3 = Color3.fromRGB(r, g, b)
end

function lib:SetButtonsColor(r, g ,b)
    Toggle.BackgroundColor3 = Color3.fromRGB(r, g, b)
    Button.BackgroundColor3 = Color3.fromRGB(r, g, b)
    ComboBox.BackgroundColor3 = Color3.fromRGB(r, g, b)
    ComboElem.BackgroundColor3 = Color3.fromRGB(r, g, b)
    InputBox.BackgroundColor3 = Color3.fromRGB(r, g, b)
end

function lib:SetInputBoxColor(r, g, b)
    InputBox.BackgroundColor3 = Color3.fromRGB(r, g, b)
    TextBox.BackgroundColor3 = Color3.fromRGB(math.max(0, r-10), math.max(0, g-10), math.max(0, b-10))
end

function lib:SetTheme(theme)
    if theme == "Default" then
        lib:SetBackgroundColor(30, 30, 30)
        lib:SetButtonsColor(40, 40, 40)
        lib:SetCloseBtnColor(255, 0, 0)
        lib:SetTitleColor(255, 255, 255)
        lib:SetInputBoxColor(40, 40, 40)
    elseif theme == "TomorrowNightBlue" then
        lib:SetBackgroundColor(5, 16, 58)
        lib:SetButtonsColor(74, 208, 238)
        lib:SetCloseBtnColor(74, 208, 238)
        lib:SetTitleColor(255, 255, 255)
        lib:SetInputBoxColor(74, 208, 238)
    elseif theme == "HighContrast" then
        lib:SetBackgroundColor(0, 0, 0)
        lib:SetButtonsColor(0, 0, 0)
        lib:SetCloseBtnColor(255, 255, 0)
        lib:SetTitleColor(255, 255, 255)
        lib:SetInputBoxColor(0, 0, 0)
    elseif theme == "Aqua" then
        lib:SetBackgroundColor(44, 62, 82)
        lib:SetButtonsColor(52, 74, 95)
        lib:SetCloseBtnColor(26, 189, 158)
        lib:SetTitleColor(255, 255, 255)
        lib:SetInputBoxColor(52, 74, 95)
    elseif theme == "Ocean" then
        lib:SetBackgroundColor(26, 32, 58)
        lib:SetButtonsColor(38, 45, 71)
        lib:SetCloseBtnColor(86, 76, 251)
        lib:SetTitleColor(255, 255, 255)
        lib:SetInputBoxColor(38, 45, 71)
    else
        error("Theme not found.")
    end
end

-- Apply default theme
lib:SetTheme("Default")

-- Fade in animation
Main.BackgroundTransparency = 1
Title.TextTransparency = 1
ContentFrame.Visible = false

task.spawn(function()
    local fadeIn = TweenService:Create(Main, TweenInfo.new(0.3), {BackgroundTransparency = 0})
    fadeIn:Play()
    
    task.wait(0.1)
    local titleFade = TweenService:Create(Title, TweenInfo.new(0.3), {TextTransparency = 0})
    titleFade:Play()
    
    fadeIn.Completed:Wait()
    ContentFrame.Visible = true
end)

return lib
