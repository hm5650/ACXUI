-- Arceus X UI Lib (Enhanced Visuals)
-- Major UI enhancements: smooth animations, glass morphism, glow effects, better visual feedback

local lib = {}

local Script_Title = "Arceus X <font color=\"rgb(255, 0, 0)\">|</font> Ui Lib"
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

-- Color Theme System
local ThemeColors = {
    Primary = Color3.fromRGB(255, 50, 50),
    Secondary = Color3.fromRGB(40, 40, 40),
    Text = Color3.fromRGB(255, 255, 255),
    Accent = Color3.fromRGB(74, 208, 238),
    Background = Color3.fromRGB(30, 30, 30)
}

-- Enhanced Instances with new visual elements
local Arceus = Instance.new("ScreenGui")
local Main = Instance.new("Frame")
local MainUICorner = Instance.new("UICorner")
local MainStroke = Instance.new("UIStroke")
local MainGlow = Instance.new("ImageLabel") -- New: Glow effect

local Intro = Instance.new("Frame")
local IntroUICorner = Instance.new("UICorner")
local IntroGradient = Instance.new("UIGradient") -- New: Gradient overlay

local Logo = Instance.new("ImageButton")
local LogoUIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local LogoPulseLight = Instance.new("Frame") -- New: Pulsing effect

local Title = Instance.new("TextLabel")
local TitleStroke = Instance.new("UIStroke") -- New: Text outline

local Menu = Instance.new("ScrollingFrame")
local MenuUIListLayout = Instance.new("UIListLayout")
local MenuUIPadding = Instance.new("UIPadding")

-- Interactive elements (will be cloned)
local Toggle = Instance.new("Frame")
local ToggleUICorner = Instance.new("UICorner")
local ToggleStroke = Instance.new("UIStroke")
local ToggleHoverEffect = Instance.new("Frame") -- New: Hover highlight

-- ... (similar enhancements for Button, InputBox, ComboBox, etc.)

-- Initialize enhanced properties
Arceus.Name = "ArceusXEnhanced"
Arceus.ResetOnSpawn = false
Arceus.ZIndexBehavior = Enum.ZIndexBehavior.Global
Arceus.DisplayOrder = 999

-- Main Container with glass morphism effect
Main.Name = "Main"
Main.Parent = Arceus
Main.BackgroundColor3 = ThemeColors.Background
Main.BackgroundTransparency = 0.3 -- More transparent for glass effect
Main.Size = UDim2.new(0, 400, 0, 500)
Main.AnchorPoint = Vector2.new(0.5, 0.5)
Main.Position = UDim2.new(0.5, 0, 0.5, 0)
Main.Active = true
Main.Draggable = true

-- Glass morphism blur effect (simulated with transparency layers)
MainUICorner.CornerRadius = UDim.new(0, 12)
MainUICorner.Parent = Main

-- Enhanced stroke with gradient
MainStroke.Thickness = 2
MainStroke.Color = Color3.fromRGB(255, 255, 255)
MainStroke.Transparency = 0.8
MainStroke.Parent = Main

-- Inner glow effect
local InnerGlow = Instance.new("Frame")
InnerGlow.Name = "InnerGlow"
InnerGlow.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
InnerGlow.BackgroundTransparency = 0.95
InnerGlow.Size = UDim2.new(1, 0, 1, 0)
InnerGlow.BorderSizePixel = 0
InnerGlow.ZIndex = -1
InnerGlow.Parent = Main

local InnerGlowCorner = Instance.new("UICorner")
InnerGlowCorner.CornerRadius = UDim.new(0, 12)
InnerGlowCorner.Parent = InnerGlow

-- Enhanced Intro with gradient animation
Intro.Name = "Intro"
Intro.BackgroundColor3 = ThemeColors.Primary
Intro.BackgroundTransparency = 0.1
Intro.Size = UDim2.new(1, 0, 1, 0)
Intro.ZIndex = 10
Intro.Parent = Main

IntroUICorner.CornerRadius = UDim.new(0, 12)
IntroUICorner.Parent = Intro

-- Animated gradient for intro
IntroGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, ThemeColors.Primary),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(255, 100, 100)),
    ColorSequenceKeypoint.new(1, ThemeColors.Primary)
})
IntroGradient.Rotation = 45
IntroGradient.Parent = Intro

-- Enhanced Logo with pulse animation
Logo.Name = "Logo"
Logo.Image = "http://www.roblox.com/asset/?id=9178187770"
Logo.BackgroundTransparency = 1
Logo.Size = UDim2.new(0, 120, 0, 120)
Logo.AnchorPoint = Vector2.new(0.5, 0.5)
Logo.Position = UDim2.new(0.5, 0, 0.5, 0)
Logo.Parent = Intro

-- Logo glow effect
local LogoGlow = Instance.new("ImageLabel")
LogoGlow.Name = "LogoGlow"
LogoGlow.Image = "rbxassetid://8992231221" -- Soft glow texture
LogoGlow.ImageTransparency = 0.7
LogoGlow.BackgroundTransparency = 1
LogoGlow.Size = UDim2.new(1.5, 0, 1.5, 0)
LogoGlow.AnchorPoint = Vector2.new(0.5, 0.5)
LogoGlow.Position = UDim2.new(0.5, 0, 0.5, 0)
LogoGlow.ZIndex = -1
LogoGlow.Parent = Logo

-- Enhanced Title with text glow
Title.Name = "Title"
Title.Text = Script_Title
Title.Font = Enum.Font.GothamBold
Title.TextSize = 20
Title.TextColor3 = ThemeColors.Text
Title.BackgroundTransparency = 1
Title.Size = UDim2.new(1, -20, 0, 40)
Title.Position = UDim2.new(0, 10, 0, 10)
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = Main

-- Title text shadow
TitleStroke.Thickness = 2
TitleStroke.Color = Color3.fromRGB(0, 0, 0)
TitleStroke.Transparency = 0.5
TitleStroke.Parent = Title

-- Enhanced Menu with better scrolling
Menu.Name = "Menu"
Menu.BackgroundTransparency = 1
Menu.Size = UDim2.new(1, -20, 1, -80)
Menu.Position = UDim2.new(0, 10, 0, 60)
Menu.CanvasSize = UDim2.new(0, 0, 0, 0)
Menu.ScrollBarImageColor3 = ThemeColors.Primary
Menu.ScrollBarThickness = 4
Menu.ScrollBarImageTransparency = 0.5
Menu.Parent = Main

MenuUIPadding.PaddingLeft = UDim.new(0, 5)
MenuUIPadding.PaddingRight = UDim.new(0, 5)
MenuUIPadding.PaddingTop = UDim.new(0, 5)
MenuUIPadding.PaddingBottom = UDim.new(0, 5)
MenuUIPadding.Parent = Menu

MenuUIListLayout.Padding = UDim.new(0, 8)
MenuUIListLayout.Parent = Menu

-- Enhanced Toggle Template
Toggle.Name = "ToggleTemplate"
Toggle.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
Toggle.BackgroundTransparency = 0.2
Toggle.Size = UDim2.new(1, 0, 0, 45)

ToggleUICorner.CornerRadius = UDim.new(0, 8)
ToggleUICorner.Parent = Toggle

ToggleStroke.Thickness = 1
ToggleStroke.Color = Color3.fromRGB(100, 100, 100)
ToggleStroke.Transparency = 0.5
ToggleStroke.Parent = Toggle

-- Hover effect for toggle
ToggleHoverEffect.Name = "HoverEffect"
ToggleHoverEffect.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ToggleHoverEffect.BackgroundTransparency = 0.9
ToggleHoverEffect.Size = UDim2.new(1, 0, 1, 0)
ToggleHoverEffect.ZIndex = -1
ToggleHoverEffect.Parent = Toggle

local HoverEffectCorner = Instance.new("UICorner")
HoverEffectCorner.CornerRadius = UDim.new(0, 8)
HoverEffectCorner.Parent = ToggleHoverEffect

-- Enhanced toggle switch
local ToggleSwitch = Instance.new("Frame")
ToggleSwitch.Name = "Switch"
ToggleSwitch.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
ToggleSwitch.Size = UDim2.new(0, 60, 0, 30)
ToggleSwitch.AnchorPoint = Vector2.new(1, 0.5)
ToggleSwitch.Position = UDim2.new(1, -10, 0.5, 0)
ToggleSwitch.Parent = Toggle

local SwitchCorner = Instance.new("UICorner")
SwitchCorner.CornerRadius = UDim.new(1, 0)
SwitchCorner.Parent = ToggleSwitch

local SwitchDot = Instance.new("Frame")
SwitchDot.Name = "Dot"
SwitchDot.BackgroundColor3 = ThemeColors.Primary
SwitchDot.Size = UDim2.new(0, 20, 0, 20)
SwitchDot.AnchorPoint = Vector2.new(0.5, 0.5)
SwitchDot.Position = UDim2.new(0.3, 0, 0.5, 0)
SwitchDot.Parent = ToggleSwitch

local DotCorner = Instance.new("UICorner")
DotCorner.CornerRadius = UDim.new(1, 0)
DotCorner.Parent = SwitchDot

local DotGlow = Instance.new("Frame")
DotGlow.Name = "DotGlow"
DotGlow.BackgroundColor3 = ThemeColors.Primary
DotGlow.BackgroundTransparency = 0.7
DotGlow.Size = UDim2.new(1.5, 0, 1.5, 0)
DotGlow.AnchorPoint = Vector2.new(0.5, 0.5)
DotGlow.Position = UDim2.new(0.5, 0, 0.5, 0)
DotGlow.ZIndex = -1
DotGlow.Parent = SwitchDot

-- Enhanced Button Template (similar improvements)
local Button = Toggle:Clone()
Button.Name = "ButtonTemplate"

-- Enhanced InputBox Template
local InputBox = Toggle:Clone()
InputBox.Name = "InputBoxTemplate"

-- Remove toggle switch from input box
InputBox.Switch:Destroy()

local InputTextBox = Instance.new("TextBox")
InputTextBox.Name = "TextBox"
InputTextBox.BackgroundTransparency = 1
InputTextBox.TextColor3 = ThemeColors.Text
InputTextBox.TextSize = 16
InputTextBox.Font = Enum.Font.Gotham
InputTextBox.PlaceholderColor3 = Color3.fromRGB(150, 150, 150)
InputTextBox.Size = UDim2.new(1, -20, 1, 0)
InputTextBox.Position = UDim2.new(0, 10, 0, 0)
InputTextBox.TextXAlignment = Enum.TextXAlignment.Left
InputTextBox.Parent = InputBox

-- Animation system
local AnimationPresets = {
    EaseOut = TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
    EaseInOut = TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut),
    Elastic = TweenInfo.new(0.5, Enum.EasingStyle.Elastic, Enum.EasingDirection.Out, 0, false, 0),
    Bounce = TweenInfo.new(0.4, Enum.EasingStyle.Bounce, Enum.EasingDirection.Out)
}

-- Enhanced animation functions
local function animateProperty(object, property, targetValue, preset)
    local tween = TweenService:Create(object, preset or AnimationPresets.EaseOut, {[property] = targetValue})
    tween:Play()
    return tween
end

local function pulseEffect(object, intensity)
    local originalSize = object.Size
    local tween1 = TweenService:Create(object, AnimationPresets.EaseOut, {Size = originalSize * (1 + intensity)})
    local tween2 = TweenService:Create(object, AnimationPresets.EaseInOut, {Size = originalSize})
    
    tween1:Play()
    tween1.Completed:Connect(function()
        tween2:Play()
    end)
end

local function hoverAnimation(button)
    local connection1 = button.MouseEnter:Connect(function()
        animateProperty(button.HoverEffect, "BackgroundTransparency", 0.7)
        animateProperty(button.UIStroke, "Transparency", 0.3)
        pulseEffect(button, 0.02)
    end)
    
    local connection2 = button.MouseLeave:Connect(function()
        animateProperty(button.HoverEffect, "BackgroundTransparency", 0.9)
        animateProperty(button.UIStroke, "Transparency", 0.5)
    end)
    
    return {connection1, connection2}
end

-- Initialize animations
local function initAnimations()
    -- Animate intro gradient
    local gradientTween = TweenService:Create(
        IntroGradient,
        TweenInfo.new(3, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut, -1, true),
        {Offset = Vector2.new(1, 0)}
    )
    gradientTween:Play()
    
    -- Logo pulse animation
    local logoPulse = TweenService:Create(
        LogoGlow,
        TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true),
        {ImageTransparency = 0.4}
    )
    logoPulse:Play()
    
    -- Main window entrance animation
    Main.Position = UDim2.new(0.5, 0, 0.4, 0)
    Main.Size = UDim2.new(0, 0, 0, 0)
    Main.BackgroundTransparency = 1
    
    local entranceAnim = TweenService:Create(
        Main,
        AnimationPresets.Elastic,
        {
            Size = UDim2.new(0, 400, 0, 500),
            BackgroundTransparency = 0.3
        }
    )
    
    local positionAnim = TweenService:Create(
        Main,
        AnimationPresets.EaseOut,
        {Position = UDim2.new(0.5, 0, 0.5, 0)}
    )
    
    entranceAnim:Play()
    task.wait(0.1)
    positionAnim:Play()
end

-- Enhanced UI element creation
function lib:AddToggle(name, callback, default, ...)
    local toggle = Toggle:Clone()
    toggle.Name = name
    toggle.LayoutOrder = #Menu:GetChildren()
    toggle.Visible = true
    toggle.Parent = Menu
    
    -- Set label
    local label = Instance.new("TextLabel")
    label.Name = "Label"
    label.Text = name
    label.TextColor3 = ThemeColors.Text
    label.TextSize = 16
    label.Font = Enum.Font.Gotham
    label.BackgroundTransparency = 1
    label.Size = UDim2.new(1, -80, 1, 0)
    label.Position = UDim2.new(0, 10, 0, 0)
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = toggle
    
    -- Initialize state
    local isEnabled = default or false
    local switch = toggle.Switch
    local dot = switch.Dot
    
    local function updateToggle()
        local targetPosition = isEnabled and 0.7 or 0.3
        local targetColor = isEnabled and ThemeColors.Primary or Color3.fromRGB(100, 100, 100)
        
        animateProperty(dot, "Position", UDim2.new(targetPosition, 0, 0.5, 0))
        animateProperty(dot, "BackgroundColor3", targetColor)
        animateProperty(dot.DotGlow, "BackgroundColor3", targetColor)
    end
    
    -- Click handler with animation
    toggle.MouseButton1Click:Connect(function()
        isEnabled = not isEnabled
        updateToggle()
        
        -- Add click feedback
        pulseEffect(switch, 0.1)
        
        if callback then
            callback(isEnabled, ...)
        end
    end)
    
    -- Add hover effects
    hoverAnimation(toggle)
    updateToggle()
    
    return toggle
end

function lib:AddButton(name, callback, ...)
    local button = Button:Clone()
    button.Name = name
    button.LayoutOrder = #Menu:GetChildren()
    button.Visible = true
    button.Parent = Menu
    
    -- Set label
    local label = Instance.new("TextLabel")
    label.Name = "Label"
    label.Text = name
    label.TextColor3 = ThemeColors.Text
    label.TextSize = 16
    label.Font = Enum.Font.GothamBold
    label.BackgroundTransparency = 1
    label.Size = UDim2.new(1, 0, 1, 0)
    label.TextXAlignment = Enum.TextXAlignment.Center
    label.Parent = button
    
    -- Click handler with enhanced animation
    button.MouseButton1Click:Connect(function()
        -- Press animation
        animateProperty(button, "BackgroundTransparency", 0.4, AnimationPresets.EaseInOut)
        animateProperty(button.UIStroke, "Thickness", 3)
        
        task.wait(0.1)
        
        animateProperty(button, "BackgroundTransparency", 0.2)
        animateProperty(button.UIStroke, "Thickness", 1)
        
        -- Ripple effect
        local ripple = Instance.new("Frame")
        ripple.Name = "Ripple"
        ripple.BackgroundColor3 = ThemeColors.Primary
        ripple.BackgroundTransparency = 0.7
        ripple.Size = UDim2.new(0, 0, 0, 0)
        ripple.AnchorPoint = Vector2.new(0.5, 0.5)
        ripple.Position = UDim2.new(0.5, 0, 0.5, 0)
        ripple.ZIndex = -1
        ripple.Parent = button
        
        local rippleCorner = Instance.new("UICorner")
        rippleCorner.CornerRadius = UDim.new(1, 0)
        rippleCorner.Parent = ripple
        
        animateProperty(ripple, "Size", UDim2.new(2, 0, 2, 0))
        animateProperty(ripple, "BackgroundTransparency", 1)
        
        task.wait(0.3)
        ripple:Destroy()
        
        if callback then
            callback(...)
        end
    end)
    
    -- Add hover effects
    hoverAnimation(button)
    
    return button
end

function lib:AddInputBox(name, callback, placeholder, default, ...)
    local inputBox = InputBox:Clone()
    inputBox.Name = name
    inputBox.LayoutOrder = #Menu:GetChildren()
    inputBox.Visible = true
    inputBox.Parent = Menu
    
    -- Set label
    local label = Instance.new("TextLabel")
    label.Name = "Label"
    label.Text = name
    label.TextColor3 = ThemeColors.Text
    label.TextSize = 16
    label.Font = Enum.Font.Gotham
    label.BackgroundTransparency = 1
    label.Size = UDim2.new(1, -20, 0, 20)
    label.Position = UDim2.new(0, 10, 0, 5)
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = inputBox
    
    -- Configure text box
    local textBox = inputBox.TextBox
    textBox.PlaceholderText = placeholder or "Enter text..."
    textBox.Text = default or ""
    
    -- Focus animations
    textBox.Focused:Connect(function()
        animateProperty(inputBox.UIStroke, "Color", ThemeColors.Primary)
        animateProperty(inputBox.UIStroke, "Transparency", 0.3)
        animateProperty(inputBox, "BackgroundTransparency", 0.1)
    end)
    
    textBox.FocusLost:Connect(function()
        animateProperty(inputBox.UIStroke, "Color", Color3.fromRGB(100, 100, 100))
        animateProperty(inputBox.UIStroke, "Transparency", 0.5)
        animateProperty(inputBox, "BackgroundTransparency", 0.2)
        
        if callback then
            callback(textBox.Text, ...)
        end
    end)
    
    -- Add hover effects
    hoverAnimation(inputBox)
    
    return inputBox
end

-- Enhanced theme system
function lib:SetTheme(themeName)
    local themes = {
        Default = {
            Primary = Color3.fromRGB(255, 50, 50),
            Background = Color3.fromRGB(30, 30, 30),
            Text = Color3.fromRGB(255, 255, 255)
        },
        Dark = {
            Primary = Color3.fromRGB(86, 76, 251),
            Background = Color3.fromRGB(20, 20, 20),
            Text = Color3.fromRGB(240, 240, 240)
        },
        Light = {
            Primary = Color3.fromRGB(0, 120, 215),
            Background = Color3.fromRGB(245, 245, 245),
            Text = Color3.fromRGB(30, 30, 30)
        },
        Neon = {
            Primary = Color3.fromRGB(0, 255, 255),
            Background = Color3.fromRGB(10, 10, 30),
            Text = Color3.fromRGB(255, 255, 255)
        },
        Forest = {
            Primary = Color3.fromRGB(76, 175, 80),
            Background = Color3.fromRGB(25, 35, 25),
            Text = Color3.fromRGB(240, 240, 240)
        }
    }
    
    local theme = themes[themeName] or themes.Default
    ThemeColors = theme
    
    -- Apply theme to all elements
    animateProperty(Main, "BackgroundColor3", theme.Background)
    animateProperty(Intro, "BackgroundColor3", theme.Primary)
    animateProperty(Title, "TextColor3", theme.Text)
    
    -- Update gradients
    IntroGradient.Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, theme.Primary),
        ColorSequenceKeypoint.new(0.5, Color3.fromRGB(
            math.min(255, theme.Primary.R * 255 + 50),
            math.min(255, theme.Primary.G * 255 + 50),
            math.min(255, theme.Primary.B * 255 + 50)
        )),
        ColorSequenceKeypoint.new(1, theme.Primary)
    })
end

-- Additional enhanced features
function lib:AddSlider(name, min, max, default, callback)
    -- Implementation for enhanced slider with visual feedback
end

function lib:AddColorPicker(name, default, callback)
    -- Implementation for color picker with preview
end

function lib:AddDropdown(name, options, default, callback)
    -- Implementation for enhanced dropdown
end

function lib:ShowNotification(title, message, duration)
    -- Implementation for toast notifications
end

-- Initialize UI
Arceus.Parent = game:GetService("CoreGui")
initAnimations()

-- Set default theme
lib:SetTheme("Default")

return lib
