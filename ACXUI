local lib = {}

local Script_Title = "Arceus X <font color=\"rgb(255, 0, 0)\">|</font> UI Library"

-- Glass theme colors and properties
local GLASS_COLOR = Color3.fromRGB(25, 25, 35)
local GLASS_TRANSPARENCY = 0.85
local ACCENT_COLOR = Color3.fromRGB(0, 150, 255)
local BLUR_INTENSITY = 10

-- Create Blur Effect
local BlurEffect = Instance.new("BlurEffect")
BlurEffect.Size = BLUR_INTENSITY
BlurEffect.Name = "UIBlur"

-- Instances:
local Arceus = Instance.new("ScreenGui")
local Main = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local UIStroke = Instance.new("UIStroke")
local UIGradient = Instance.new("UIGradient")
local Intro = Instance.new("Frame")
local UICorner_2 = Instance.new("UICorner")
local Logo = Instance.new("ImageButton")
local UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local Title = Instance.new("TextLabel")
local TitleGlow = Instance.new("ImageLabel")
local Menu = Instance.new("ScrollingFrame")
local UIListLayout = Instance.new("UIListLayout")
local Close = Instance.new("TextButton")
local CloseGlow = Instance.new("ImageLabel")

-- Glass element templates
local GlassFrame = Instance.new("Frame")
local GlassCorner = Instance.new("UICorner")
local GlassStroke = Instance.new("UIStroke")
local GlassGlow = Instance.new("ImageLabel")

-- Toggle template
local Toggle = Instance.new("ImageButton")
local ToggleUICorner = Instance.new("UICorner")
local ToggleUIStroke = Instance.new("UIStroke")
local Enabled = Instance.new("Frame")
local EnabledUICorner = Instance.new("UICorner")
local Check = Instance.new("Frame")
local CheckUICorner = Instance.new("UICorner")
local ToggleName = Instance.new("TextLabel")

-- Button template
local Button = Instance.new("ImageButton")
local ButtonUICorner = Instance.new("UICorner")
local ButtonUIStroke = Instance.new("UIStroke")
local ButtonName = Instance.new("TextLabel")

-- Input Box template
local InputBox = Instance.new("ImageButton")
local InputBoxUICorner = Instance.new("UICorner")
local InputBoxUIStroke = Instance.new("UIStroke")
local InputName = Instance.new("TextLabel")
local TextBox = Instance.new("TextBox")
local TextBoxUICorner = Instance.new("UICorner")
local TextBoxUIStroke = Instance.new("UIStroke")

-- ComboBox template
local ComboBox = Instance.new("ImageButton")
local ComboBoxUICorner = Instance.new("UICorner")
local ComboBoxUIStroke = Instance.new("UIStroke")
local ComboName = Instance.new("TextLabel")
local ComboArrow = Instance.new("TextLabel")

-- ComboElem template
local ComboElem = Instance.new("ImageButton")
local ComboElemUICorner = Instance.new("UICorner")
local ComboElemUIStroke = Instance.new("UIStroke")
local ComboElemName = Instance.new("TextLabel")

-- Tab template
local tab = Instance.new("Frame")

-- Properties:
Arceus.Name = "Arceus"
Arceus.Enabled = true
Arceus.ResetOnSpawn = true
Arceus.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
Arceus.DisplayOrder = 999999999

-- Create glass template
GlassFrame.Name = "GlassFrame"
GlassFrame.BackgroundColor3 = GLASS_COLOR
GlassFrame.BackgroundTransparency = GLASS_TRANSPARENCY
GlassFrame.Size = UDim2.new(1, 0, 1, 0)

GlassCorner.CornerRadius = UDim.new(0.15, 0)
GlassCorner.Parent = GlassFrame

GlassStroke.Color = Color3.fromRGB(255, 255, 255)
GlassStroke.Transparency = 0.8
GlassStroke.Thickness = 1.5
GlassStroke.Parent = GlassFrame

GlassGlow.Name = "Glow"
GlassGlow.BackgroundTransparency = 1
GlassGlow.Image = "rbxassetid://8992230677"
GlassGlow.ImageColor3 = ACCENT_COLOR
GlassGlow.ImageTransparency = 0.8
GlassGlow.ScaleType = Enum.ScaleType.Slice
GlassGlow.SliceCenter = Rect.new(100, 100, 100, 100)
GlassGlow.Size = UDim2.new(1, 40, 1, 40)
GlassGlow.Position = UDim2.new(-0.2, 0, -0.2, 0)
GlassGlow.ZIndex = -1
GlassGlow.Parent = GlassFrame

-- Main Frame
Main.Name = "Main"
Main.Parent = Arceus
Main.Active = true
Main.Draggable = true
Main.AnchorPoint = Vector2.new(0.5, 0.5)
Main.BackgroundColor3 = GLASS_COLOR
Main.BackgroundTransparency = GLASS_TRANSPARENCY
Main.BorderSizePixel = 0
Main.Position = UDim2.new(0.5, 0, -0.2, 0)
Main.Size = UDim2.new(0.3, 0, 0.3, 0)
Main.ClipsDescendants = true

UICorner.CornerRadius = UDim.new(0.15, 0)
UICorner.Parent = Main

UIStroke.Color = Color3.fromRGB(255, 255, 255)
UIStroke.Transparency = 0.8
UIStroke.Thickness = 1.5
UIStroke.Parent = Main

-- Main glow effect
local MainGlow = GlassGlow:Clone()
MainGlow.Parent = Main

Intro.Name = "Intro"
Intro.Parent = Main
Intro.BackgroundColor3 = GLASS_COLOR
Intro.BackgroundTransparency = GLASS_TRANSPARENCY
Intro.ClipsDescendants = true
Intro.Size = UDim2.new(1, 0, 1, 0)
Intro.ZIndex = 2

UICorner_2.CornerRadius = UDim.new(0.15, 0)
UICorner_2.Parent = Intro

Logo.Parent = Intro
Logo.AnchorPoint = Vector2.new(0.5, 0.5)
Logo.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Logo.BackgroundTransparency = 1
Logo.BorderSizePixel = 0
Logo.Position = UDim2.new(0.5, 0, 0.5, 0)
Logo.Size = UDim2.new(0.75, 0, 0.75, 0)
Logo.ZIndex = 2
Logo.Image = "http://www.roblox.com/asset/?id=9178187770"
Logo.ScaleType = Enum.ScaleType.Fit
Logo.Active = false

UIAspectRatioConstraint.Parent = Logo

Title.Name = "Title"
Title.Parent = Main
Title.AnchorPoint = Vector2.new(1, 0)
Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.BorderSizePixel = 0
Title.Position = UDim2.new(0.975, 0, 0.075, 0)
Title.Size = UDim2.new(0.85, 0, 0.155, 0)
Title.Font = Enum.Font.GothamBold
Title.RichText = true
Title.Text = Script_Title
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextScaled = true
Title.TextSize = 14
Title.TextWrapped = true
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.TextYAlignment = Enum.TextYAlignment.Center

TitleGlow.Name = "TitleGlow"
TitleGlow.BackgroundTransparency = 1
TitleGlow.Image = "rbxassetid://8992230677"
TitleGlow.ImageColor3 = ACCENT_COLOR
TitleGlow.ImageTransparency = 0.9
TitleGlow.ScaleType = Enum.ScaleType.Slice
TitleGlow.SliceCenter = Rect.new(100, 100, 100, 100)
TitleGlow.Size = UDim2.new(1, 20, 1, 20)
TitleGlow.Position = UDim2.new(-0.1, 0, -0.1, 0)
TitleGlow.ZIndex = -1
TitleGlow.Parent = Title

Menu.Name = "Menu"
Menu.Parent = Main
Menu.Active = true
Menu.AnchorPoint = Vector2.new(0.5, 1)
Menu.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Menu.BackgroundTransparency = 1
Menu.AutomaticCanvasSize = Enum.AutomaticSize.Y
Menu.BorderSizePixel = 0
Menu.Position = UDim2.new(0.5, 0, 0.95, 0)
Menu.Size = UDim2.new(0.95, 0, 0.65, 0)
Menu.CanvasSize = UDim2.new(0, 0, 0, 0)
Menu.ScrollBarImageTransparency = 0.8
Menu.ScrollBarThickness = 4

UIListLayout.Parent = Menu
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.Padding = UDim.new(0.02, 0)

Close.Name = "Close"
Close.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Close.BackgroundTransparency = 1
Close.BorderSizePixel = 0
Close.Position = UDim2.new(0.85, 0, 0.075, 0)
Close.Size = UDim2.new(0.1, 0, 0.125, 0)
Close.Font = Enum.Font.GothamBold
Close.Text = "✕"
Close.TextColor3 = Color3.fromRGB(255, 100, 100)
Close.TextScaled = true
Close.TextSize = 14
Close.TextWrapped = true
Close.TextXAlignment = Enum.TextXAlignment.Center
Close.Parent = Main

CloseGlow = TitleGlow:Clone()
CloseGlow.ImageColor3 = Color3.fromRGB(255, 100, 100)
CloseGlow.Parent = Close

-- Toggle Template
Toggle.Name = "Toggle"
Toggle.BackgroundColor3 = GLASS_COLOR
Toggle.BackgroundTransparency = GLASS_TRANSPARENCY
Toggle.Size = UDim2.new(1, 0, 0, 45)
Toggle.AutoButtonColor = false

ToggleUICorner.CornerRadius = UDim.new(0.15, 0)
ToggleUICorner.Parent = Toggle

ToggleUIStroke = GlassStroke:Clone()
ToggleUIStroke.Parent = Toggle

local ToggleGlow = GlassGlow:Clone()
ToggleGlow.Parent = Toggle

Enabled.Name = "Enabled"
Enabled.Parent = Toggle
Enabled.AnchorPoint = Vector2.new(1, 0.5)
Enabled.BackgroundColor3 = GLASS_COLOR
Enabled.BackgroundTransparency = GLASS_TRANSPARENCY + 0.1
Enabled.Position = UDim2.new(0.95, 0, 0.5, 0)
Enabled.Size = UDim2.new(0.15, 0, 0.7, 0)

EnabledUICorner.CornerRadius = UDim.new(1, 0)
EnabledUICorner.Parent = Enabled

Check.Name = "Check"
Check.Parent = Enabled
Check.AnchorPoint = Vector2.new(0.5, 0.5)
Check.BackgroundColor3 = ACCENT_COLOR
Check.BackgroundTransparency = 0.3
Check.Position = UDim2.new(0.3, 0, 0.5, 0)
Check.Size = UDim2.new(0.5, 0, 0.5, 0)

CheckUICorner.CornerRadius = UDim.new(1, 0)
CheckUICorner.Parent = Check

ToggleName.Name = "Name"
ToggleName.Parent = Toggle
ToggleName.AnchorPoint = Vector2.new(0, 0.5)
ToggleName.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ToggleName.BackgroundTransparency = 1
ToggleName.BorderSizePixel = 0
ToggleName.Position = UDim2.new(0.05, 0, 0.5, 0)
ToggleName.Size = UDim2.new(0.7, 0, 0.8, 0)
ToggleName.Font = Enum.Font.Gotham
ToggleName.Text = "Toggle"
ToggleName.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleName.TextScaled = true
ToggleName.TextSize = 14
ToggleName.TextWrapped = true
ToggleName.TextXAlignment = Enum.TextXAlignment.Left
ToggleName.TextYAlignment = Enum.TextYAlignment.Center

-- Button Template
Button.Name = "Button"
Button.BackgroundColor3 = GLASS_COLOR
Button.BackgroundTransparency = GLASS_TRANSPARENCY
Button.Size = UDim2.new(1, 0, 0, 45)
Button.AutoButtonColor = false

ButtonUICorner.CornerRadius = UDim.new(0.15, 0)
ButtonUICorner.Parent = Button

ButtonUIStroke = GlassStroke:Clone()
ButtonUIStroke.Parent = Button

local ButtonGlow = GlassGlow:Clone()
ButtonGlow.Parent = Button

ButtonName.Name = "Name"
ButtonName.Parent = Button
ButtonName.AnchorPoint = Vector2.new(0.5, 0.5)
ButtonName.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ButtonName.BackgroundTransparency = 1
ButtonName.BorderSizePixel = 0
ButtonName.Position = UDim2.new(0.5, 0, 0.5, 0)
ButtonName.Size = UDim2.new(0.9, 0, 0.8, 0)
ButtonName.Font = Enum.Font.Gotham
ButtonName.Text = "Button"
ButtonName.TextColor3 = Color3.fromRGB(255, 255, 255)
ButtonName.TextScaled = true
ButtonName.TextSize = 14
ButtonName.TextWrapped = true
ButtonName.TextXAlignment = Enum.TextXAlignment.Center
ButtonName.TextYAlignment = Enum.TextYAlignment.Center

-- Input Box Template
InputBox.Name = "InputBox"
InputBox.BackgroundColor3 = GLASS_COLOR
InputBox.BackgroundTransparency = GLASS_TRANSPARENCY
InputBox.Size = UDim2.new(1, 0, 0, 45)
InputBox.AutoButtonColor = false

InputBoxUICorner.CornerRadius = UDim.new(0.15, 0)
InputBoxUICorner.Parent = InputBox

InputBoxUIStroke = GlassStroke:Clone()
InputBoxUIStroke.Parent = InputBox

local InputGlow = GlassGlow:Clone()
InputGlow.Parent = InputBox

InputName.Name = "Name"
InputName.Parent = InputBox
InputName.AnchorPoint = Vector2.new(0, 0.5)
InputName.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
InputName.BackgroundTransparency = 1
InputName.BorderSizePixel = 0
InputName.Position = UDim2.new(0.05, 0, 0.5, 0)
InputName.Size = UDim2.new(0.5, 0, 0.8, 0)
InputName.Font = Enum.Font.Gotham
InputName.Text = "Input"
InputName.TextColor3 = Color3.fromRGB(255, 255, 255)
InputName.TextScaled = true
InputName.TextSize = 14
InputName.TextWrapped = true
InputName.TextXAlignment = Enum.TextXAlignment.Left
InputName.TextYAlignment = Enum.TextYAlignment.Center

TextBox.Name = "TextBox"
TextBox.Parent = InputBox
TextBox.AnchorPoint = Vector2.new(1, 0.5)
TextBox.BackgroundColor3 = GLASS_COLOR
TextBox.BackgroundTransparency = GLASS_TRANSPARENCY + 0.1
TextBox.BorderSizePixel = 0
TextBox.Position = UDim2.new(0.95, 0, 0.5, 0)
TextBox.Size = UDim2.new(0.35, 0, 0.7, 0)
TextBox.Font = Enum.Font.Gotham
TextBox.PlaceholderColor3 = Color3.fromRGB(200, 200, 200)
TextBox.PlaceholderText = "Enter text..."
TextBox.Text = ""
TextBox.TextColor3 = Color3.fromRGB(255, 255, 255)
TextBox.TextScaled = true
TextBox.TextSize = 14
TextBox.TextWrapped = true
TextBox.ClearTextOnFocus = false

TextBoxUICorner.CornerRadius = UDim.new(0.15, 0)
TextBoxUICorner.Parent = TextBox

TextBoxUIStroke = GlassStroke:Clone()
TextBoxUIStroke.Parent = TextBox

-- ComboBox Template
ComboBox.Name = "ComboBox"
ComboBox.BackgroundColor3 = GLASS_COLOR
ComboBox.BackgroundTransparency = GLASS_TRANSPARENCY
ComboBox.Size = UDim2.new(1, 0, 0, 45)
ComboBox.AutoButtonColor = false

ComboBoxUICorner.CornerRadius = UDim.new(0.15, 0)
ComboBoxUICorner.Parent = ComboBox

ComboBoxUIStroke = GlassStroke:Clone()
ComboBoxUIStroke.Parent = ComboBox

local ComboGlow = GlassGlow:Clone()
ComboGlow.Parent = ComboBox

ComboName.Name = "Name"
ComboName.Parent = ComboBox
ComboName.AnchorPoint = Vector2.new(0, 0.5)
ComboName.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ComboName.BackgroundTransparency = 1
ComboName.BorderSizePixel = 0
ComboName.Position = UDim2.new(0.05, 0, 0.5, 0)
ComboName.Size = UDim2.new(0.7, 0, 0.8, 0)
ComboName.Font = Enum.Font.Gotham
ComboName.Text = "Select Option"
ComboName.TextColor3 = Color3.fromRGB(255, 255, 255)
ComboName.TextScaled = true
ComboName.TextSize = 14
ComboName.TextWrapped = true
ComboName.TextXAlignment = Enum.TextXAlignment.Left
ComboName.TextYAlignment = Enum.TextYAlignment.Center

ComboArrow.Name = "Arrow"
ComboArrow.Parent = ComboBox
ComboArrow.AnchorPoint = Vector2.new(1, 0.5)
ComboArrow.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ComboArrow.BackgroundTransparency = 1
ComboArrow.BorderSizePixel = 0
ComboArrow.Position = UDim2.new(0.95, 0, 0.5, 0)
ComboArrow.Size = UDim2.new(0.08, 0, 0.5, 0)
ComboArrow.Font = Enum.Font.GothamBold
ComboArrow.Text = "▼"
ComboArrow.TextColor3 = ACCENT_COLOR
ComboArrow.TextScaled = true

-- ComboElem Template
ComboElem.Name = "ComboElem"
ComboElem.BackgroundColor3 = GLASS_COLOR
ComboElem.BackgroundTransparency = GLASS_TRANSPARENCY + 0.1
ComboElem.Size = UDim2.new(1, 0, 0, 40)
ComboElem.AutoButtonColor = false

ComboElemUICorner.CornerRadius = UDim.new(0.1, 0)
ComboElemUICorner.Parent = ComboElem

ComboElemUIStroke = GlassStroke:Clone()
ComboElemUIStroke.Parent = ComboElem

ComboElemName.Name = "Name"
ComboElemName.Parent = ComboElem
ComboElemName.AnchorPoint = Vector2.new(0.5, 0.5)
ComboElemName.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ComboElemName.BackgroundTransparency = 1
ComboElemName.BorderSizePixel = 0
ComboElemName.Position = UDim2.new(0.5, 0, 0.5, 0)
ComboElemName.Size = UDim2.new(0.9, 0, 0.8, 0)
ComboElemName.Font = Enum.Font.Gotham
ComboElemName.Text = "Option"
ComboElemName.TextColor3 = Color3.fromRGB(255, 255, 255)
ComboElemName.TextScaled = true
ComboElemName.TextSize = 14
ComboElemName.TextWrapped = true
ComboElemName.TextXAlignment = Enum.TextXAlignment.Center
ComboElemName.TextYAlignment = Enum.TextYAlignment.Center

-- Tab Template
tab.Name = "Tab"
tab.BackgroundTransparency = 1
tab.Size = UDim2.new(1, 0, 0, 10)

-- Animation Functions
local TweenService = game:GetService("TweenService")

local function FadeIn(object, duration)
	local tween = TweenService:Create(object, TweenInfo.new(duration, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
		BackgroundTransparency = GLASS_TRANSPARENCY
	})
	tween:Play()
	return tween
end

local function FadeOut(object, duration, targetTransparency)
	local tween = TweenService:Create(object, TweenInfo.new(duration, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
		BackgroundTransparency = targetTransparency or 1
	})
	tween:Play()
	return tween
end

local function SlideIn(object, targetPosition, duration)
	local tween = TweenService:Create(object, TweenInfo.new(duration, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
		Position = targetPosition
	})
	tween:Play()
	return tween
end

local function ScaleIn(object, targetSize, duration)
	local tween = TweenService:Create(object, TweenInfo.new(duration, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
		Size = targetSize
	})
	tween:Play()
	return tween
end

local function Pulse(object, duration)
	local originalSize = object.Size
	local tween1 = TweenService:Create(object, TweenInfo.new(duration/2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
		Size = originalSize * 1.05
	})
	local tween2 = TweenService:Create(object, TweenInfo.new(duration/2, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
		Size = originalSize
	})
	tween1:Play()
	tween1.Completed:Connect(function()
		tween2:Play()
	end)
end

-- SCRIPT

-- Close button animation
Close.MouseEnter:Connect(function()
	FadeOut(Close, 0.2, 0.5)
	Close.TextColor3 = Color3.fromRGB(255, 150, 150)
end)

Close.MouseLeave:Connect(function()
	FadeIn(Close, 0.2)
	Close.TextColor3 = Color3.fromRGB(255, 100, 100)
end)

Close.MouseButton1Click:Connect(function()
	Logo.Active = true
	
	-- Fade out elements
	for _, element in pairs(Menu:GetChildren()) do
		if element:IsA("GuiObject") and element.Name ~= "UIListLayout" then
			FadeOut(element, 0.2)
		end
	end
	
	FadeOut(Title, 0.2)
	FadeOut(Close, 0.2)
	
	task.wait(0.2)
	
	-- Scale down main window
	Main:TweenSize(
		UDim2.fromScale(0.1, 0.175),
		Enum.EasingDirection.Out,
		Enum.EasingStyle.Quad,
		0.3, true, nil
	)
	
	task.wait(0.3)
	
	-- Move logo to top left
	Logo:TweenSizeAndPosition(
		UDim2.fromScale(0.175, 0.175),
		UDim2.fromScale(0.075, 0.15),
		Enum.EasingDirection.Out,
		Enum.EasingStyle.Quad,
		0.25, true, nil
	)
	
	-- Hide all elements except intro
	for _, obj in pairs(Main:GetChildren()) do
		if obj:IsA("GuiObject") and obj ~= Intro then
			obj.Visible = false
		end
	end
	
	-- Apply blur effect
	FadeOut(Main, 0.3, 0.9)
	FadeOut(Logo, 0.3, 0.8)
	FadeOut(Intro, 0.3, 0.9)
end)

-- Logo click to reopen
Logo.MouseButton1Click:Connect(function()
	Logo.Active = false
	
	-- Fade in
	FadeIn(Main, 0.3)
	FadeIn(Logo, 0.3)
	FadeIn(Intro, 0.3)
	
	-- Show all elements
	for _, obj in pairs(Main:GetChildren()) do
		if obj:IsA("GuiObject") and obj ~= Intro then
			obj.Visible = true
			FadeIn(obj, 0.3)
		end
	end
	
	task.wait(0.3)
	
	-- Scale up main window
	Main:TweenSize(
		UDim2.fromScale(0.3, 0.3),
		Enum.EasingDirection.Out,
		Enum.EasingStyle.Quad,
		0.3, true, nil
	)
	
	task.wait(0.3)
	
	-- Move logo back to center briefly
	Logo:TweenSizeAndPosition(
		UDim2.fromScale(0.5, 0.5),
		UDim2.fromScale(0.5, 0.5),
		Enum.EasingDirection.Out,
		Enum.EasingStyle.Quad,
		0.25, true, nil
	)
	
	task.wait(0.25)
	
	-- Move to top left
	Logo:TweenSizeAndPosition(
		UDim2.fromScale(0.175, 0.175),
		UDim2.fromScale(0.075, 0.15),
		Enum.EasingDirection.Out,
		Enum.EasingStyle.Quad,
		0.25, true, nil
	)
	
	-- Fade out intro
	FadeOut(Intro, 0.3, 1)
end)

-- Parent UI
local function uiparent()
	local success, parent = pcall(function()
		return gethui()
	end)
	return success and parent or game:GetService("CoreGui")
end

-- Apply blur to parent
pcall(function()
	BlurEffect.Parent = game:GetService("Lighting")
	Arceus.Parent = uiparent()
end)

-- Add blur to game if in CoreGui
if Arceus.Parent == game:GetService("CoreGui") or Arceus.Parent == game:GetService("Players").LocalPlayer.PlayerGui then
	BlurEffect.Parent = game:GetService("Lighting")
end

local element_height = 45
local elements = 0

local function AddSpace(parent)
	local space = tab:Clone()
	space.Parent = parent
	space.LayoutOrder = elements
	space.Visible = true
	elements += 1
end

-- Element hover effects
local function SetupHoverEffects(element)
	element.MouseEnter:Connect(function()
		FadeOut(element, 0.2, GLASS_TRANSPARENCY - 0.1)
		Pulse(element, 0.3)
	end)
	
	element.MouseLeave:Connect(function()
		FadeIn(element, 0.2)
	end)
end

-- Library Functions
function lib:AddToggle(name, funct, enabled, ...)
	local newTog = Toggle:Clone()
	local args = {...}
	
	SetupHoverEffects(newTog)
	
	local check = newTog:WaitForChild("Enabled"):WaitForChild("Check")
	local togName = newTog:WaitForChild("Name")
	
	newTog.MouseButton1Click:Connect(function()
		enabled = not enabled
		check.Visible = enabled
		Pulse(check, 0.2)
		funct(enabled, unpack(args))
	end)
	
	check.Visible = enabled
	togName.Text = name
	
	newTog.Size = UDim2.new(1, 0, 0, element_height)
	newTog.Name = name
	newTog.Parent = Menu
	newTog.LayoutOrder = elements
	newTog.Visible = true
	
	-- Fade in animation
	newTog.BackgroundTransparency = 1
	FadeIn(newTog, 0.3)
	
	elements += 1
	AddSpace(Menu)
	
	return newTog
end

function lib:AddButton(name, funct, ...)
	local newBut = Button:Clone()
	local args = {...}
	
	SetupHoverEffects(newBut)
	
	newBut.MouseButton1Click:Connect(function()
		Pulse(newBut, 0.2)
		funct(unpack(args))
	end)
	
	newBut:WaitForChild("Name").Text = name
	newBut.Size = UDim2.new(1, 0, 0, element_height)
	newBut.Name = name
	newBut.Parent = Menu
	newBut.LayoutOrder = elements
	newBut.Visible = true
	
	-- Fade in animation
	newBut.BackgroundTransparency = 1
	FadeIn(newBut, 0.3)
	
	elements += 1
	AddSpace(Menu)
	
	return newBut
end

function lib:AddInputBox(name, funct, placeholder, default, ...)
	local newInput = InputBox:Clone()
	local args = {...}
	
	SetupHoverEffects(newInput)
	
	local inputName = newInput:WaitForChild("Name")
	local textBox = newInput:WaitForChild("TextBox")
	
	inputName.Text = name
	if placeholder then
		textBox.PlaceholderText = placeholder
	end
	if default then
		textBox.Text = default
	end
	
	textBox.Focused:Connect(function()
		FadeOut(textBox, 0.2, GLASS_TRANSPARENCY)
	end)
	
	textBox.FocusLost:Connect(function(enterPressed)
		FadeIn(textBox, 0.2)
		if enterPressed then
			funct(textBox.Text, unpack(args))
		end
	end)
	
	newInput.Size = UDim2.new(1, 0, 0, element_height)
	newInput.Name = name
	newInput.Parent = Menu
	newInput.LayoutOrder = elements
	newInput.Visible = true
	
	-- Fade in animation
	newInput.BackgroundTransparency = 1
	FadeIn(newInput, 0.3)
	
	elements += 1
	AddSpace(Menu)
	
	return {
		Frame = newInput,
		TextBox = textBox,
		GetText = function() return textBox.Text end,
		SetText = function(t) textBox.Text = t end,
		Clear = function() textBox.Text = "" end,
		SetPlaceholder = function(p) textBox.PlaceholderText = p end
	}
end

function lib:AddComboBox(text, options, funct, ...)
	local newCombo = ComboBox:Clone()
	local enabled = false
	local elems = {}
	local args = {...}
	
	SetupHoverEffects(newCombo)
	
	local comboName = newCombo:WaitForChild("Name")
	local comboArrow = newCombo:WaitForChild("Arrow")
	
	local function setBoxState()
		comboArrow.Text = enabled and "▲" or "▼"
		for _, elem in ipairs(elems) do
			elem.Visible = enabled
			if enabled then
				FadeIn(elem, 0.2)
			else
				FadeOut(elem, 0.2)
			end
		end
	end
	
	newCombo.MouseButton1Click:Connect(function()
		enabled = not enabled
		setBoxState()
		Pulse(newCombo, 0.2)
	end)
	
	comboName.Text = text .. ": " .. (#options > 0 and options[1] or "")
	newCombo.Size = UDim2.new(1, 0, 0, element_height)
	newCombo.Name = text
	newCombo.Parent = Menu
	newCombo.LayoutOrder = elements
	newCombo.Visible = true
	
	-- Fade in animation
	newCombo.BackgroundTransparency = 1
	FadeIn(newCombo, 0.3)
	
	elements += 1
	AddSpace(Menu)
	
	for _, name in ipairs(options) do
		local newElem = ComboElem:Clone()
		table.insert(elems, newElem)
		
		SetupHoverEffects(newElem)
		
		newElem.MouseButton1Click:Connect(function()
			comboName.Text = text .. ": " .. name
			enabled = false
			setBoxState()
			Pulse(newElem, 0.2)
			funct(name, unpack(args))
		end)
		
		newElem:WaitForChild("Name").Text = name
		newElem.Size = UDim2.new(0.95, -20, 0, element_height - 10)
		newElem.Position = UDim2.new(0.025, 10, 0, 0)
		newElem.Name = name
		newElem.Parent = Menu
		newElem.LayoutOrder = elements
		newElem.Visible = false
		
		elements += 1
		AddSpace(Menu)
	end
	
	return newCombo
end

-- Customization Functions
function lib:SetTitle(txt)
    Title.Text = txt
end

function lib:SetIcon(img)
    Logo.Image = img
end

function lib:SetBackgroundColor(r, g, b)
    Main.BackgroundColor3 = Color3.fromRGB(r, g, b)
    Intro.BackgroundColor3 = Color3.fromRGB(r, g, b)
end

function lib:SetTitleColor(r, g, b)
    Title.TextColor3 = Color3.fromRGB(r, g, b)
    TitleGlow.ImageColor3 = Color3.fromRGB(r, g, b)
end

function lib:SetAccentColor(r, g, b)
    ACCENT_COLOR = Color3.fromRGB(r, g, b)
    Check.BackgroundColor3 = ACCENT_COLOR
    ComboArrow.TextColor3 = ACCENT_COLOR
    
    -- Update all glow effects
    for _, obj in pairs(Main:GetDescendants()) do
        if obj.Name == "Glow" then
            obj.ImageColor3 = ACCENT_COLOR
        end
    end
end

function lib:SetGlassTransparency(transparency)
    GLASS_TRANSPARENCY = transparency
    Main.BackgroundTransparency = transparency
    Intro.BackgroundTransparency = transparency
    
    -- Update all glass elements
    for _, element in pairs(Menu:GetChildren()) do
        if element:IsA("GuiObject") and element.BackgroundTransparency < 1 then
            element.BackgroundTransparency = transparency
        end
    end
end

function lib:SetTheme(theme)
	if theme == "Glass" then
		lib:SetAccentColor(0, 150, 255)
		lib:SetGlassTransparency(0.85)
	elseif theme == "Dark" then
		lib:SetAccentColor(255, 100, 150)
		lib:SetGlassTransparency(0.7)
		lib:SetBackgroundColor(20, 20, 25)
	else
